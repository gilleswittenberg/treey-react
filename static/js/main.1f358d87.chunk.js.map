{"version":3,"sources":["contexts/TreeyContext.ts","hooks/useTreey.ts","components/TreeyProvider.tsx","contexts/UIContext.ts","hooks/useEscListener.ts","components/UIProvider.tsx","utils/basepath.ts","components/Header.tsx","components/Spinner.tsx","components/ItemData.tsx","components/Button.tsx","utils/last.ts","utils/treeItemUtils.ts","utils/defer.ts","components/ItemBody.tsx","components/ItemDnD.tsx","components/ItemForm.tsx","components/Item.tsx","components/FormAdd.tsx","components/Items.tsx","components/Tree.tsx","pages/Home.tsx","components/ItemOverview.tsx","pages/Item.tsx","pages/404.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["TreeyContext","createContext","tree","treey","init","read","createAndAdd","update","remove","move","useTreey","_useState","useState","_useState2","Object","slicedToArray","setTree","useEffect","asyncToGenerator","regenerator_default","a","mark","_callee","wrap","_context","prev","next","sent","stop","actions","_read2","_callee2","id","_context2","abrupt","_x","apply","this","arguments","_createAndAdd2","_callee3","data","parentId","_context3","_x2","_x3","_update2","_callee4","_context4","_x4","_x5","_remove2","_callee5","index","_context5","_x6","_x7","_x8","_move2","_callee6","oldParentId","oldIndex","_context6","_x9","_x10","_x11","_x12","_x13","TreeyProvider","_ref","children","_useTreey","_useTreey2","value","react_default","createElement","contexts_TreeyContext","Provider","unimplemented","Error","isShownForm","setShownForm","unsetShownForm","itemIsOpen","setIsOpen","unsetIsOpen","isDragging","itemIsDragging","setIsDragging","unsetIsDragging","UIContext","useEscListener","action","handler","event","keyCode","preventDefault","window","addEventListener","removeEventListener","createFullName","utils","UIProvider","shownForm","set","createPath","parents","isAdd","length","undefined","arr","map","concat","join","_useState3","_useState4","isOpen","setStateIsOpen","ids","path","includes","_useState5","_useState6","setStateIsDragging","filter","i","contexts_UIContext","basepath","location","host","Header","className","es","to","src","process","width","height","alt","Spinner","ItemData","isUrl","test","href","onClick","stopPropagation","Button","type","style","backgroundImage","typeToImageMap","title","last","getId","item","state","getData","getPath","getName","stringifyData","JSON","stringify","parseData","str","parse","err","defer","func","setTimeout","ItemBody","isOver","onClickAdd","onClickEdit","onClickDelete","dropId","slice","name","_useContext","useContext","isDraggingGlobal","isDraggingUIContext","isHovered","setIsHovered","_useDrag","useDrag","begin","end","collect","monitor","_useDrag2","drag","hasRelations","relations","showAddButton","showButtons","dataString","linkTo","_useDrop","useDrop","accept","drop","_drop","draggableData","shallow","canDrop","_useDrop2","isOverDeep","isHidden","showDrop","showDnDPlaceHolderChild","cs","ref","onMouseEnter","onMouseLeave","components_ItemData","components_Button","isShown","ItemDnD","useRef","hoverRegion","setHoverRegion","getItem","hover","clientOffset","getClientOffset","clientRect","current","getBoundingClientRect","y","top","h","newIndex","didDrop","_useDrop2$","showPlaceholder","showPrePlaceholder","showPostPlaceholder","components_ItemBody","ItemForm","submit","_ref$initialValue","initialValue","setValue","onSubmit","_ref2","onChange","target","elem","focus","Item","_useContext2","isEditing","showItem","showForm","showItems","_ref3","trimmedValue","newData","trim","isEqual","components_ItemDnD","selection","getSelection","toString","components_ItemForm","components_Items","items","FormAdd","showButton","Items","showFormAdd","key","components_Item","components_FormAdd","Tree","esm","backend","HTML5Backend","PageHome","showSpinner","showTree","components_Spinner","Fragment","components_Tree","parseFullName","ItemOverview","fullName","setItem","notFound","setNotFound","invalidFullName","setInvalidFullName","isLoading","itemName","events","reverse","payload","showPayload","datetime","String","PageItem","components_ItemOverview","Page404","App","components_Header","components_TreeyProvider","components_UIProvider","pages_Home","pages_Item","_404","default","Boolean","hostname","match","ReactDOM","render","src_App","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"4aAceA,EAFMC,wBALP,CACZC,KAAM,KACNC,MAAO,gDCP6DA,IAA9DA,MAASC,SAAMC,SAAMC,iBAAcC,WAAQC,WAAQC,SAkC5CC,EAhCE,WAAM,IAAAC,EACGC,qBADHC,EAAAC,OAAAC,EAAA,EAAAD,CAAAH,EAAA,GACdT,EADcW,EAAA,GACRG,EADQH,EAAA,GAErBI,oBAAU,WACRH,OAAAI,EAAA,EAAAJ,CAAAK,EAAAC,EAAAC,KAAC,SAAAC,IAAA,IAAApB,EAAA,OAAAiB,EAAAC,EAAAG,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,EACoBtB,IADpB,OACOF,EADPsB,EAAAG,KAECX,EAAQd,GAFT,wBAAAsB,EAAAI,SAAAN,KAADR,IAIC,IACH,IAAMe,EAAiB,CACrBxB,KAAI,eAAAyB,EAAAhB,OAAAI,EAAA,EAAAJ,CAAAK,EAAAC,EAAAC,KAAE,SAAAU,EAAOC,GAAP,OAAAb,EAAAC,EAAAG,KAAA,SAAAU,GAAA,cAAAA,EAAAR,KAAAQ,EAAAP,MAAA,cAAAO,EAAAP,KAAA,EACSrB,EAAK2B,GADd,cAAAC,EAAAC,OAAA,SAAAD,EAAAN,MAAA,wBAAAM,EAAAL,SAAAG,MAAF,gBAAAI,GAAA,OAAAL,EAAAM,MAAAC,KAAAC,YAAA,GAGJhC,aAAY,eAAAiC,EAAAzB,OAAAI,EAAA,EAAAJ,CAAAK,EAAAC,EAAAC,KAAE,SAAAmB,EAAOC,EAAYC,GAAnB,IAAAxC,EAAA,OAAAiB,EAAAC,EAAAG,KAAA,SAAAoB,GAAA,cAAAA,EAAAlB,KAAAkB,EAAAjB,MAAA,cAAAiB,EAAAjB,KAAA,EACOpB,EAAamC,EAAMC,GAD1B,OACNxC,EADMyC,EAAAhB,KAEZX,EAAQd,GAFI,wBAAAyC,EAAAf,SAAAY,MAAF,gBAAAI,EAAAC,GAAA,OAAAN,EAAAH,MAAAC,KAAAC,YAAA,GAIZ/B,OAAM,eAAAuC,EAAAhC,OAAAI,EAAA,EAAAJ,CAAAK,EAAAC,EAAAC,KAAE,SAAA0B,EAAOf,EAAQS,GAAf,IAAAvC,EAAA,OAAAiB,EAAAC,EAAAG,KAAA,SAAAyB,GAAA,cAAAA,EAAAvB,KAAAuB,EAAAtB,MAAA,cAAAsB,EAAAtB,KAAA,EACanB,EAAOyB,EAAIS,GADxB,OACAvC,EADA8C,EAAArB,KAENX,EAAQd,GAFF,wBAAA8C,EAAApB,SAAAmB,MAAF,gBAAAE,EAAAC,GAAA,OAAAJ,EAAAV,MAAAC,KAAAC,YAAA,GAIN9B,OAAM,eAAA2C,EAAArC,OAAAI,EAAA,EAAAJ,CAAAK,EAAAC,EAAAC,KAAE,SAAA+B,EAAOpB,EAAQU,EAAcW,GAA7B,IAAAnD,EAAA,OAAAiB,EAAAC,EAAAG,KAAA,SAAA+B,GAAA,cAAAA,EAAA7B,KAAA6B,EAAA5B,MAAA,cAAA4B,EAAA5B,KAAA,EACalB,EAAOwB,EAAIU,EAAUW,GADlC,OACAnD,EADAoD,EAAA3B,KAENX,EAAQd,GAFF,wBAAAoD,EAAA1B,SAAAwB,MAAF,gBAAAG,EAAAC,EAAAC,GAAA,OAAAN,EAAAf,MAAAC,KAAAC,YAAA,GAIN7B,KAAI,eAAAiD,EAAA5C,OAAAI,EAAA,EAAAJ,CAAAK,EAAAC,EAAAC,KAAE,SAAAsC,EAAO3B,EAAQ4B,EAAiBlB,EAAcmB,EAAiBR,GAA/D,IAAAnD,EAAA,OAAAiB,EAAAC,EAAAG,KAAA,SAAAuC,GAAA,cAAAA,EAAArC,KAAAqC,EAAApC,MAAA,cAAAoC,EAAApC,KAAA,EACejB,EAAKuB,EAAI4B,EAAalB,EAAUmB,EAAUR,GADzD,OACEnD,EADF4D,EAAAnC,KAEJX,EAAQd,GAFJ,wBAAA4D,EAAAlC,SAAA+B,MAAF,gBAAAI,EAAAC,EAAAC,EAAAC,EAAAC,GAAA,OAAAT,EAAAtB,MAAAC,KAAAC,YAAA,IAKN,MAAO,CAACpC,EAAM2B,ICbDuC,EAZwB,SAAAC,GAAkB,IAAfC,EAAeD,EAAfC,SAAeC,EAEjC7D,IAFiC8D,EAAA1D,OAAAC,EAAA,EAAAD,CAAAyD,EAAA,GAGjDE,EAAQ,CAAEvE,KAHuCsE,EAAA,GAGjCrE,MAHiCqE,EAAA,IAKvD,OACEE,EAAAtD,EAAAuD,cAACC,EAAaC,SAAd,CAAuBJ,MAAQA,GAC3BH,ICAFQ,EAAgB,WAAQ,MAAM,IAAIC,MAAO,8BAEzCN,EAAQ,CACZO,YAAaF,EACbG,aAAcH,EACdI,eAAgBJ,EAChBK,WAAYL,EACZM,UAAWN,EACXO,YAAaP,EACbQ,WAAYR,EACZS,eAAgBT,EAChBU,cAAeV,EACfW,gBAAiBX,GAKJY,EAFGzF,wBAAcwE,GCdjBkB,EAdQ,SAACC,GAEtB3E,oBAAU,WACR,IAAM4E,EAAU,SAACC,GACO,KAAlBA,EAAMC,UACRD,EAAME,iBACNJ,MAIJ,OADAK,OAAOC,iBAAiB,UAAWL,GAC5B,kBAAMI,OAAOE,oBAAoB,UAAWN,KAClD,CAACD,KCRWQ,EAAqBjG,IAA9BkG,MAASD,eAqEFE,EA/DqB,SAAAjC,GAAkB,IAAfC,EAAeD,EAAfC,SAAe3D,EAG3BC,qBAH2BC,EAAAC,OAAAC,EAAA,EAAAD,CAAAH,EAAA,GAG7C4F,EAH6C1F,EAAA,GAGlC2F,EAHkC3F,EAAA,GAI9C4F,EAAa,SAACC,GAAuC,IAAzBC,EAAyBrE,UAAAsE,OAAA,QAAAC,IAAAvE,UAAA,IAAAA,UAAA,GACnDwE,EAAMJ,EAAQK,IAAI,SAAA/E,GAAE,OAAIoE,EAAepE,KAC7C,OAAQ2E,EAAQG,EAAIE,OAAO,OAASF,GAAKG,KAAK,MAI1C/B,EAAiB,kBAAMsB,OAAIK,IAEjClB,EAAeT,GAEfjE,oBAAU,WAER,OADAgF,OAAOC,iBAAiB,QAAShB,GAC1B,kBAAMe,OAAOE,oBAAoB,QAASjB,KAChD,IAjBiD,IAAAgC,EAoBnBtG,mBAAgB,IApBGuG,EAAArG,OAAAC,EAAA,EAAAD,CAAAoG,EAAA,GAoB7CE,EApB6CD,EAAA,GAoBrCE,EApBqCF,EAAA,GAqB9ChC,EAAa,SAACmC,GAClB,IAAMC,EAAOd,EAAWa,GACxB,OAAOF,EAAOI,SAASD,IAvB2BE,EAqCX7G,qBArCW8G,EAAA5G,OAAAC,EAAA,EAAAD,CAAA2G,EAAA,GAqC7CnC,EArC6CoC,EAAA,GAqCjCC,EArCiCD,EAAA,GA2C9CjD,EAAQ,CACZO,YApCkB,SAAC0B,GAAD,IAAeC,EAAfrE,UAAAsE,OAAA,QAAAC,IAAAvE,UAAA,IAAAA,UAAA,UAAiCiE,IAAcE,EAAWC,EAASC,IAqCrF1B,aApCmB,SAACyB,GAAD,IAAeC,EAAfrE,UAAAsE,OAAA,QAAAC,IAAAvE,UAAA,IAAAA,UAAA,UAAiCkE,EAAIC,EAAWC,EAASC,KAqC5EzB,iBACAC,aACAC,UAvBgB,SAACkC,GACjB,IAAInC,EAAWmC,GAAf,CACA,IAAMC,EAAOd,EAAWa,GACxBD,EAAeD,EAAOJ,OAAOO,MAqB7BlC,YAnBkB,SAACiC,GACnB,IAAMC,EAAOd,EAAWa,GACxBD,EAAeD,EAAOQ,OAAO,SAAAC,GAAC,OAAIA,IAAMN,MAkBxCjC,WAZwB,uBAAqBuB,IAAfvB,GAa9BC,eAZqB,SAAC+B,GAAD,OAAchC,IAAemB,EAAWa,IAa7D9B,cAZoB,SAAC8B,GAAD,OAAcK,EAAmBlB,EAAWa,KAahE7B,gBAZsB,kBAAMkC,OAAmBd,KAejD,OACEnC,EAAAtD,EAAAuD,cAACmD,EAAUjD,SAAX,CAAoBJ,MAAQA,GACxBH,YCpEOyD,EAD2B,+BAAzB9B,OAAO+B,SAASC,KAAwC,gBAAkB,ICkB5EC,SAZW,WAExB,OACExD,EAAAtD,EAAAuD,cAAA,UAAQwD,UAAU,UAChBzD,EAAAtD,EAAAuD,cAACyD,EAAA,EAAD,CAAMC,GAAKN,GACTrD,EAAAtD,EAAAuD,cAAA,UAAID,EAAAtD,EAAAuD,cAAA,OAAK2D,IAJHC,qCAIeC,MAAM,OAAOC,OAAO,OAAOC,IAAI,YACpDhE,EAAAtD,EAAAuD,cAAA,uBCNOgE,SAFW,kBAAOjE,EAAAtD,EAAAuD,cAAA,KAAGwD,UAAU,WAAb,6CCWlBS,EATmB,SAAAvE,GAAc,IAAX5B,EAAW4B,EAAX5B,KAC7BoG,EAAQ,eAAeC,KAAKrG,GAClC,OACEiC,EAAAtD,EAAAuD,cAAA,QAAMwD,UAAU,YACZU,EAAQnE,EAAAtD,EAAAuD,cAAA,KAAGoE,KAAOtG,EAAOuG,QAAU,SAAAlD,GAAK,OAAIA,EAAMmD,oBAAsBxG,GAAaA,ICkB9EyG,SATiB,SAAA7E,GAAuB,IAApB8E,EAAoB9E,EAApB8E,KAAMH,EAAc3E,EAAd2E,QACjCb,EAAY,UAAYgB,EAExBC,EAAQ,CAAEC,gBADK,QAAArC,OAAYuB,eAAZ,YAAAvB,OAVA,SAACmC,GACtB,OAAQA,GACR,IAAK,MAAO,MAAO,gBACnB,IAAK,OAAQ,MAAO,mBACpB,IAAK,SAAU,MAAO,oBAM8CG,CAAeH,GAA9D,OAErB,OACEzE,EAAAtD,EAAAuD,cAAA,UAAQwD,UAAYA,EAAYiB,MAAQA,EAAQJ,QAAUA,EAAUO,MAAQJ,GAASA,KCvB1EK,EADF,SAAI1C,GAAJ,OAAiBA,EAAIA,EAAIF,OAAS,ICC9BR,EAAqBjG,IAA9BkG,MAASD,eAEJqD,EAAQ,SAACC,GAAD,OAAqCA,EAAKC,MAAMrC,KAAOoC,EAAKC,MAAMrC,IAAI,IAC9EsC,EAAU,SAACF,GAAD,OAA2BA,EAAKC,OAASD,EAAKC,MAAMlH,MAC9DoH,EAAU,SAAC7H,EAAoB0E,GAArB,OAA4C1E,EAAK0E,EAAQM,OAAOhF,GAAM0E,GAChFoD,EAAU,SAAC9H,EAAoB0E,GAArB,OAA6CmD,EAAQ7H,EAAI0E,GAASK,IAAI,SAAA/E,GAAE,OAAIoE,EAAepE,KAAKiF,KAAK,MAC/G8C,EAAgB,SAACtH,GAC5B,MAAoB,kBAATA,EAA0BA,EAC9BuH,KAAKC,UAAUxH,OAAMoE,EAAW,IAE5BqD,EAAY,SAACC,GACxB,IACE,OAAOH,KAAKI,MAAMD,GAClB,MAAOE,GACP,OAAOF,ICZIG,EAHD,SAACC,GACXtE,OAAOuE,WAAWD,EAAM,IC2GbE,EApFmB,SAAApG,GAAoF,IAAjFkD,EAAiFlD,EAAjFkD,KAAMlE,EAA2EgB,EAA3EhB,MAAOqG,EAAoErF,EAApEqF,KAAMgB,EAA8DrG,EAA9DqG,OAAQ1B,EAAsD3E,EAAtD2E,QAAS2B,EAA6CtG,EAA7CsG,WAAYC,EAAiCvG,EAAjCuG,YAAaC,EAAoBxG,EAApBwG,cAE1F7I,EAAKyH,EAAMC,GACXoB,EAAS9I,EACT0E,EAAUa,EAAKwD,MAAM,GAAI,GACzBC,EAAOlB,EAAQ9H,EAAI0E,GAL2FuE,EAMhCC,qBAAWxF,GAA3EyF,EANgGF,EAM5G3F,WAA8BE,EAN8EyF,EAM9EzF,cAAeC,EAN+DwF,EAM/DxF,gBAAiBL,EAN8C6F,EAM9C7F,UAC9DjF,EAAU+K,qBAAWlL,GAArBG,MACFiL,EAAsBD,IARwFxK,EAUlFC,oBAAS,GAVyEC,EAAAC,OAAAC,EAAA,EAAAD,CAAAH,EAAA,GAU7G0K,EAV6GxK,EAAA,GAUlGyK,EAVkGzK,EAAA,GAAA0K,EAcrFC,YAAQ,CACrC9B,KAAM,CAAEP,KAAM,OAAQzC,UAASrD,QAAOrB,KAAIgJ,QAC1CS,MAAO,kBAAMnB,EAAM,kBAAM9E,EAAc+B,MACvCmE,IAAK,kBAAMjG,KACXkG,QAAS,SAAAC,GAAO,MAAK,CACnBtG,WAAYsG,EAAQtG,iBAnB4FuG,EAAA/K,OAAAC,EAAA,EAAAD,CAAAyK,EAAA,GAc3GjG,EAd2GuG,EAAA,GAc3GvG,WAAcwG,EAd6FD,EAAA,GAuB9GE,EAAerC,EAAKsC,UAAUpF,OAAS,EACvCqF,GAAiBF,EACjBG,EAAcb,IAAc/F,IAAe8F,EAC3C3I,EAAOmH,EAAQF,GACfyC,EAAapC,EAActH,GAC3B2J,EAAM,GAAApF,OAAOe,EAAP,SAAAf,OAAyB0C,EAAKsB,MA5B0EqB,EA8B7EC,YAAQ,CAC7CC,OAAQ,OACRC,KAAI,eAAAC,EAAA3L,OAAAI,EAAA,EAAAJ,CAAAK,EAAAC,EAAAC,KAAE,SAAAC,EAAOoI,EAAMkC,GAAb,IAAAc,EAAA1K,EAAA4B,EAAAC,EAAAnB,EAAA,OAAAvB,EAAAC,EAAAG,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,UAGEM,GADA0K,EAAgBhD,GACG1H,GACnB4B,EAAc4F,EAAKkD,EAAchG,SACjC7C,EAAW6I,EAAcrJ,MAEf,OADVX,EAAWoI,GANb,CAAAtJ,EAAAE,KAAA,eAAAF,EAAAU,OAAA,oBAUS,MAAT/B,EAVA,CAAAqB,EAAAE,KAAA,eAAAF,EAAAU,OAAA,wBAAAV,EAAAE,KAAA,GAWEvB,EAAMM,KAAKuB,EAAI4B,EAAalB,EAAUmB,GAXxC,QAYJuB,EAAUmC,GAZN,yBAAA/F,EAAAI,SAAAN,MAAF,gBAAAa,EAAAS,GAAA,OAAA6J,EAAArK,MAAAC,KAAAC,YAAA,GAcJqJ,QAAS,SAAAC,GAAO,MAAK,CACnBlB,OAAQkB,EAAQlB,OAAO,CAAEiC,SAAS,IAClCC,QAAShB,EAAQgB,cAhD+FC,GAAA/L,OAAAC,EAAA,EAAAD,CAAAuL,EAAA,GA8BnGS,GA9BmGD,GAAA,GA8B3GnC,OAAsB8B,GA9BqFK,GAAA,GAoD9GE,GAAWzH,EACX0H,GAAYtC,IAAWqB,GAAiBe,GACxCG,GAA0BH,GAEhC,OACEpI,EAAAtD,EAAAuD,cAAA,OAAKwD,UAAY+E,IAAG,eAAgB,CAAEH,eACpCrI,EAAAtD,EAAAuD,cAAA,OACEwI,IAAMrB,EACN3D,UAAY+E,IAAG,WAAY,CAAEjB,gBAAeC,cAAac,cACzDI,aAlDe,kBAAM9B,GAAa,IAmDlC+B,aAlDe,kBAAM/B,GAAa,KAoDlC5G,EAAAtD,EAAAuD,cAAA,QAAMqE,QAAUA,GACdtE,EAAAtD,EAAAuD,cAAC2I,EAAD,CAAU7K,KAAO0J,IACjBzH,EAAAtD,EAAAuD,cAACyD,EAAA,EAAD,CAAMC,GAAK+D,EAASjE,UAAU,QAA9B,WAEA6E,IACAtI,EAAAtD,EAAAuD,cAAA,OAAKwI,IAAMX,GAAOrE,UAAU,eAC1BzD,EAAAtD,EAAAuD,cAAC4I,EAAD,CAAQpE,KAAK,SAGf8C,GACAvH,EAAAtD,EAAAuD,cAAC4I,EAAD,CAAQpE,KAAK,MAAMH,QAAU2B,IAE/BjG,EAAAtD,EAAAuD,cAAC4I,EAAD,CAAQpE,KAAK,OAAOH,QAAU4B,IAC9BlG,EAAAtD,EAAAuD,cAAC4I,EAAD,CAAQpE,KAAK,SAASH,QAAU6B,KAElCnG,EAAAtD,EAAAuD,cAAA,OAAKwD,UAAY+E,IAAG,kBAAmB,wBAAyB,CAAEM,QAASP,MAA6BvI,EAAAtD,EAAAuD,cAAA,eCN/F8I,SA1EkB,SAAApJ,GAAqF,IAAlFqC,EAAkFrC,EAAlFqC,QAASa,EAAyElD,EAAzEkD,KAAMlE,EAAmEgB,EAAnEhB,MAAOqG,EAA4DrF,EAA5DqF,KAAMV,EAAsD3E,EAAtD2E,QAAS2B,EAA6CtG,EAA7CsG,WAAYC,EAAiCvG,EAAjCuG,YAAaC,EAAoBxG,EAApBwG,cAE1F7I,EAAKyH,EAAMC,GACXsB,EAAOlB,EAAQ9H,EAAI0E,GAEjBvG,EAAU+K,qBAAWlL,GAArBG,MACFgN,EAAMO,iBAAuB,MANiF/M,EAO9EC,qBAP8EC,EAAAC,OAAAC,EAAA,EAAAD,CAAAH,EAAA,GAO7GgN,EAP6G9M,EAAA,GAOhG+M,EAPgG/M,EAAA,GAAAwL,EAShFC,YAAQ,CAC1CC,OAAQ,OACRK,QAAS,SAAClD,EAAMkC,GAAP,OAAmBA,EAAQiC,UAAU7C,OAASA,GACvD8C,MAAO,SAACpE,EAAMkC,GACZ,IAAMmC,EAAenC,EAAQoC,kBACvBC,EAAad,GAAOA,EAAIe,SAAWf,EAAIe,QAAQC,wBACrD,GAAIF,GAAcF,EAAc,CAC9B,IAGMK,EAAIL,EAAaK,EAAIH,EAAWI,IAEtCT,EADuBQ,GAAKE,GAAQ,MAAQ,YAIhD9B,KAAI,eAAAC,EAAA3L,OAAAI,EAAA,EAAAJ,CAAAK,EAAAC,EAAAC,KAAE,SAAAC,EAAOoI,EAAMkC,GAAb,IAAAc,EAAA1K,EAAA4B,EAAAC,EAAAnB,EAAA6L,EAAA,OAAApN,EAAAC,EAAAG,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,WAGAkK,EAAQ4C,UAHR,CAAAhN,EAAAE,KAAA,eAAAF,EAAAU,OAAA,oBAMEF,GADA0K,EAAgBhD,GACG1H,GACnB4B,EAAc4F,EAAKkD,EAAchG,SACjC7C,EAAW6I,EAAcrJ,MACzBX,EAAW8G,EAAK9C,GAGhB6H,EAAWlL,GAAyB,WAAhBsK,EAA2B,EAAI,IAAM/J,IAAgBlB,GAAYmB,EAAWR,EAAQ,EAAI,GAE9GO,IAAgBlB,GAAYmB,IAAa0K,EAdzC,CAAA/M,EAAAE,KAAA,gBAAAF,EAAAU,OAAA,qBAiBS,MAAT/B,EAjBA,CAAAqB,EAAAE,KAAA,gBAAAF,EAAAU,OAAA,yBAAAV,EAAAE,KAAA,GAkBEvB,EAAMM,KAAKuB,EAAI4B,EAAalB,EAAUmB,EAAU0K,GAlBlD,yBAAA/M,EAAAI,SAAAN,MAAF,gBAAAa,EAAAS,GAAA,OAAA6J,EAAArK,MAAAC,KAAAC,YAAA,GAoBJqJ,QAAS,SAAAC,GAAO,MAAK,CACnBlB,OAAQkB,EAAQlB,OAAO,CAAEiC,SAAS,IAClCC,QAAShB,EAAQgB,cA9C+FC,EAAA/L,OAAAC,EAAA,EAAAD,CAAAuL,EAAA,GAAAoC,EAAA5B,EAAA,GAS3GD,EAT2G6B,EAS3G7B,QAASlC,EATkG+D,EASlG/D,OAAU8B,EATwFK,EAAA,GAkD9G6B,EAAkBhE,GAAUkC,EAC5B+B,EAAqBD,GAAmC,QAAhBf,EACxCiB,EAAsBF,GAAmC,WAAhBf,EAE/C,OACEjJ,EAAAtD,EAAAuD,cAAA,OAAKwI,IAAMA,GACTzI,EAAAtD,EAAAuD,cAAA,OAAKwI,IAAMX,GACT9H,EAAAtD,EAAAuD,cAAA,OAAKwD,UAAY+E,IAAG,kBAAmB,CAAEM,QAASmB,KAAwBjK,EAAAtD,EAAAuD,cAAA,aAC1ED,EAAAtD,EAAAuD,cAACkK,EAAD,CACEtH,KAAOA,EACPlE,MAAQA,EACRqG,KAAOA,EACPgB,OAASA,EACT1B,QAAUA,EACV2B,WAAaA,EACbC,YAAcA,EACdC,cAAgBA,IAElBnG,EAAAtD,EAAAuD,cAAA,OAAKwD,UAAY+E,IAAG,kBAAmB,CAAEM,QAASoB,KAAyBlK,EAAAtD,EAAAuD,cAAA,iBC9DpEmK,EArBmB,SAAAzK,GAAmC,IAAhC0K,EAAgC1K,EAAhC0K,OAAgCC,EAAA3K,EAAxB4K,oBAAwB,IAAAD,EAAT,GAASA,EAAArO,EAEzCC,mBAASqO,GAFgCpO,EAAAC,OAAAC,EAAA,EAAAD,CAAAH,EAAA,GAE5D8D,EAF4D5D,EAAA,GAErDqO,EAFqDrO,EAAA,GAI7DsO,EAAQ,eAAAC,EAAAtO,OAAAI,EAAA,EAAAJ,CAAAK,EAAAC,EAAAC,KAAG,SAAAC,EAAOwE,GAAP,OAAA3E,EAAAC,EAAAG,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cACfoE,EAAME,iBADSxE,EAAAE,KAAA,EAETqN,EAAOtK,GAFE,wBAAAjD,EAAAI,SAAAN,MAAH,gBAAAa,GAAA,OAAAiN,EAAAhN,MAAAC,KAAAC,YAAA,GASd,OACEoC,EAAAtD,EAAAuD,cAAA,QAAMwK,SAAWA,GACfzK,EAAAtD,EAAAuD,cAAA,SAAOwE,KAAK,OAAO1E,MAAQA,EAAQ4K,SANtB,SAACvJ,GAChBoJ,EAAUpJ,EAAMwJ,OAA4B7K,QAKe0I,IAAM,SAAAoC,GAAI,OAAIA,GAAQA,EAAKC,WACpF9K,EAAAtD,EAAAuD,cAAC4I,EAAD,CAAQpE,KAAK,mBCuEJsG,SA5Ee,SAAApL,GAA8B,IAA3BqC,EAA2BrC,EAA3BqC,QAASrD,EAAkBgB,EAAlBhB,MAAOqG,EAAWrF,EAAXqF,KAEzC1H,EAAKyH,EAAMC,GACXhH,EAAW8G,EAAK9C,GAChBa,EAAOsC,EAAQ7H,EAAI0E,GACnBjE,EAAOmH,EAAQF,GACfyC,EAAapC,EAActH,GAC3BsJ,EAAerC,EAAKsC,UAAUpF,OAAS,EAErCzG,EAAU+K,qBAAWlL,GAArBG,MACFK,EAAM,eAAA4O,EAAAtO,OAAAI,EAAA,EAAAJ,CAAAK,EAAAC,EAAAC,KAAG,SAAAC,IAAA,OAAAH,EAAAC,EAAAG,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,UACA,MAATvB,EADS,CAAAqB,EAAAE,KAAA,eAAAF,EAAAU,OAAA,oBAEH,MAANF,EAFS,CAAAR,EAAAE,KAAA,eAAAF,EAAAU,OAAA,wBAAAV,EAAAE,KAAA,EAGPvB,EAAMK,OAAOwB,EAAIU,EAAUW,GAHpB,wBAAA7B,EAAAI,SAAAN,MAAH,yBAAA8N,EAAAhN,MAAAC,KAAAC,YAAA,GAV8CoN,EAegDxE,qBAAWxF,GAA7GV,EAfkD0K,EAelD1K,YAAaC,EAfqCyK,EAerCzK,aAAcC,EAfuBwK,EAevBxK,eAAgBC,EAfOuK,EAePvK,WAAYC,EAfLsK,EAeKtK,UAAWC,EAfhBqK,EAegBrK,YAAaE,EAf7BmK,EAe6BnK,eAEjF6B,EAASjC,EAAWoC,GACpBoI,EAAY3K,EAAYuC,GACxBjC,EAAaC,EAAegC,GAC5BqI,EAAWtK,IAAeqK,EAC1BE,GAAYvK,GAAcqK,EAC1BG,GAAaxK,IAAgB8B,GAAU2E,GAAiB/G,EAAYuC,GAAM,IAmB1EwH,EAAM,eAAAgB,EAAAjP,OAAAI,EAAA,EAAAJ,CAAAK,EAAAC,EAAAC,KAAG,SAAAU,EAAO0C,GAAP,IAAAuL,EAAAC,EAAA,OAAA9O,EAAAC,EAAAG,KAAA,SAAAU,GAAA,cAAAA,EAAAR,KAAAQ,EAAAP,MAAA,UACbwD,IAEqB,MADf8K,EAAevL,EAAMyL,QAFd,CAAAjO,EAAAP,KAAA,eAAAO,EAAAC,OAAA,SAGmB1B,KAHnB,UAIPyP,EAAU/F,EAAU8F,IACtBG,kBAAQ1N,EAAMwN,GALL,CAAAhO,EAAAP,KAAA,eAAAO,EAAAC,OAAA,oBAMA,MAAT/B,EANS,CAAA8B,EAAAP,KAAA,eAAAO,EAAAC,OAAA,oBAOH,MAANF,EAPS,CAAAC,EAAAP,KAAA,gBAAAO,EAAAC,OAAA,yBAAAD,EAAAP,KAAA,GAQPvB,EAAMI,OAAOyB,EAAIiO,GARV,yBAAAhO,EAAAL,SAAAG,MAAH,gBAAAI,GAAA,OAAA4N,EAAA3N,MAAAC,KAAAC,YAAA,GAWZ,OACEoC,EAAAtD,EAAAuD,cAAA,OAAKwD,UAAY+E,IAAG,QAAUlE,QAAU,SAAAlD,GAAK,OAAIA,EAAMmD,oBACrDvE,EAAAtD,EAAAuD,cAAA,OAAKwD,UAAY+E,IAAG,CAAEH,UAAW6C,KAC/BlL,EAAAtD,EAAAuD,cAACyL,EAAD,CACE1J,QAAUA,EACVa,KAAOA,EACPlE,MAAQA,EACRqG,KAAOA,EACPV,QApCQ,WACVhE,EAAYuC,GAAM,IAAOrC,IAC7B,IAAMmL,EAAYpK,OAAOqK,eACzB,KAAID,GAAsC,KAAzBA,EAAUE,aACtBxE,EACL,OAAK3E,EACDA,EAAe/B,EAAYkC,QAA/B,EADoBnC,EAAUmC,IAgCxBoD,WA7BW,WACjB1F,EAAasC,GAAM,GACnBnC,EAAUmC,IA4BJqD,YA1BY,kBAAM3F,EAAasC,IA2B/BsD,cA1Bc,WACpBrK,IACA6E,EAAYkC,OA2BV7C,EAAAtD,EAAAuD,cAAA,OAAKwD,UAAY+E,IAAG,eAAgB,CAAEH,UAAW8C,KAC/CnL,EAAAtD,EAAAuD,cAAC6L,EAAD,CAAUzB,OAASA,EAASE,aAAe9C,KAE7CzH,EAAAtD,EAAAuD,cAAA,OAAKwD,UAAY+E,IAAG,CAAEH,UAAW+C,KAC/BpL,EAAAtD,EAAAuD,cAAC8L,EAAD,CAAO/J,QAAUa,EAAOmJ,MAAQhH,EAAKsC,gBCxC9B2E,SAnCkB,SAAAtM,GAAiB,IAAdqC,EAAcrC,EAAdqC,QAAcuE,EAEMC,qBAAWxF,GAAzDV,EAFwCiG,EAExCjG,YAAaC,EAF2BgG,EAE3BhG,aAAcC,EAFa+F,EAEb/F,eAC3B/E,EAAU+K,qBAAWlL,GAArBG,MAEF0P,EAAW7K,EAAY0B,GAAS,GAChCkK,GAAcf,EAMdd,EAAM,eAAAK,EAAAtO,OAAAI,EAAA,EAAAJ,CAAAK,EAAAC,EAAAC,KAAG,SAAAC,EAAOmD,GAAP,IAAAuL,EAAAtN,EAAAD,EAAA,OAAAtB,EAAAC,EAAAG,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,UACbwD,IAEqB,MADf8K,EAAevL,EAAMyL,QAFd,CAAA1O,EAAAE,KAAA,eAAAF,EAAAU,OAAA,oBAIC,OAAV/B,EAJS,CAAAqB,EAAAE,KAAA,eAAAF,EAAAU,OAAA,yBAMI2E,KADXnE,EAAW8G,EAAK9C,IALT,CAAAlF,EAAAE,KAAA,eAAAF,EAAAU,OAAA,wBAOPO,EAAOyH,EAAU8F,GAPVxO,EAAAE,KAAA,GAQPvB,EAAMG,aAAamC,EAAMC,GARlB,yBAAAlB,EAAAI,SAAAN,MAAH,gBAAAa,GAAA,OAAAiN,EAAAhN,MAAAC,KAAAC,YAAA,GAWZ,OACEoC,EAAAtD,EAAAuD,cAAA,OAAKwD,UAAU,UAAUa,QAAU,SAAAlD,GAAK,OAAIA,EAAMmD,oBAC9C2H,GACAlM,EAAAtD,EAAAuD,cAAC4I,EAAD,CAAQvE,QAlBE,WACd/D,EAAayB,GAAS,IAiBUyC,KAAK,QAEjC0G,GACAnL,EAAAtD,EAAAuD,cAAC6L,EAAD,CAAUzB,OAASA,OCLZ8B,SA1BgB,SAAAxM,GAAwB,IAArBqC,EAAqBrC,EAArBqC,QAASgK,EAAYrM,EAAZqM,MAEjCpL,EAAe4F,qBAAWxF,GAA1BJ,WAEFwK,EAAYY,EAAM9J,OAAS,EAC3BkK,GAAexL,IAErB,OACEZ,EAAAtD,EAAAuD,cAAA,OAAKwD,UAAU,SACX2H,GACApL,EAAAtD,EAAAuD,cAAA,UACI+L,EAAM3J,IAAI,SAAC2C,EAAMrG,GAAP,OACRqB,EAAAtD,EAAAuD,cAAA,MAAIoM,IAAMrH,EAAKsB,MACbtG,EAAAtD,EAAAuD,cAACqM,EAAD,CAAMtK,QAAUA,EAAUrD,MAAQA,EAAQqG,KAAOA,QAMzDoH,GACApM,EAAAtD,EAAAuD,cAACsM,EAAD,CAASvK,QAAUA,gBCHZwK,UAjBe,SAAA7M,GAAqB,IAAlBnE,EAAkBmE,EAAlBnE,KAEzBwQ,GAF2CrM,EAAZlE,MAEvBD,GAAQA,EAAK8L,WACrBhK,EAAK9B,GAAQA,EAAKyJ,MAAMrC,KAAOpH,EAAKyJ,MAAMrC,IAAI,GAC9CZ,EAAU,CAAC1E,GAEjB,OACE0C,EAAAtD,EAAAuD,cAAA,OAAKwD,UAAU,QACXnG,GACA0C,EAAAtD,EAAAuD,cAACwM,EAAA,EAAD,CAAaC,QAAUC,MACrB3M,EAAAtD,EAAAuD,cAAC8L,EAAD,CAAO/J,QAAUA,EAAUgK,MAAQA,QCU9BY,UAtBmB,WAAM,IAAArG,EAEdC,qBAAWlL,GAA3BE,EAF8B+K,EAE9B/K,KAAMC,EAFwB8K,EAExB9K,MACRoR,EAAsB,MAARrR,EACdsR,EAAmB,MAARtR,GAAyB,MAATC,EAC3B6K,EAAe,MAAR9K,EAAeA,EAAK8K,KAAO,GAExC,OACEtG,EAAAtD,EAAAuD,cAAA,OAAKwD,UAAU,iBACXoJ,GACA7M,EAAAtD,EAAAuD,cAAC8M,EAAD,MAEAD,GACA9M,EAAAtD,EAAAuD,cAAAD,EAAAtD,EAAAsQ,SAAA,KACEhN,EAAAtD,EAAAuD,cAAA,MAAIwD,UAAU,YAAa6C,GAC3BtG,EAAAtD,EAAAuD,cAACgN,GAAD,CAAMzR,KAAOA,EAAQC,MAAQA,QCnBtByR,UAAoBzR,IAA7BkG,MAASuL,eAuEFC,GAjEuB,SAAAxN,GAAkB,IAAfyN,EAAezN,EAAfyN,SAAenR,EAE9BC,qBAF8BC,EAAAC,OAAAC,EAAA,EAAAD,CAAAH,EAAA,GAE/C+I,EAF+C7I,EAAA,GAEzCkR,EAFyClR,EAAA,GAAAqG,EAGtBtG,oBAAS,GAHauG,EAAArG,OAAAC,EAAA,EAAAD,CAAAoG,EAAA,GAG/C8K,EAH+C7K,EAAA,GAGrC8K,EAHqC9K,EAAA,GAAAM,EAIR7G,oBAAS,GAJD8G,EAAA5G,OAAAC,EAAA,EAAAD,CAAA2G,EAAA,GAI/CyK,EAJ+CxK,EAAA,GAI9ByK,EAJ8BzK,EAAA,GAK9CvH,EAAU+K,qBAAWlL,GAArBG,MAERc,oBAAU,WACR,GAAa,MAATd,EAAJ,CACA,IAAM6B,EAAK4P,GAAcE,GACf,MAAN9P,EAIJlB,OAAAI,EAAA,EAAAJ,CAAAK,EAAAC,EAAAC,KAAC,SAAAC,IAAA,IAAAoI,EAAA,OAAAvI,EAAAC,EAAAG,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,EACoBvB,EAAME,KAAK2B,GAD/B,YAEU6E,KADH6C,EADPlI,EAAAG,MAEsBoQ,EAAQrI,GAAQuI,GAAY,GAFlD,wBAAAzQ,EAAAI,SAAAN,KAADR,GAHEqR,GAAmB,KAOpB,CAAChS,EAAO2R,IAEX,IAAMM,GAAyB,IAAbJ,IAA0C,IAApBE,GAAqC,MAARxI,EAC/DkG,EAAmB,MAARlG,EACX2I,EAAW3I,GAAQA,EAAKsB,KACxBrB,EAAQD,GAAQM,KAAKC,UAAUP,EAAKC,WAAO9C,EAAW,GAE5D,OACEnC,EAAAtD,EAAAuD,cAAA,OAAKwD,UAAU,gBACXiK,GACA1N,EAAAtD,EAAAuD,cAAA,6BAEAuN,GACAxN,EAAAtD,EAAAuD,cAAA,SAAKmN,EAAL,iBAEAE,GACAtN,EAAAtD,EAAAuD,cAAA,SAAKmN,EAAL,cAEAlC,GACAlL,EAAAtD,EAAAuD,cAAAD,EAAAtD,EAAAsQ,SAAA,KACEhN,EAAAtD,EAAAuD,cAAA,UAAM0N,GACN3N,EAAAtD,EAAAuD,cAAA,mBACAD,EAAAtD,EAAAuD,cAAA,KAAGwD,UAAU,aAAcwB,GAC3BjF,EAAAtD,EAAAuD,cAAA,oBACAD,EAAAtD,EAAAuD,cAAA,UACI+E,GAAQA,EAAK4I,OAAOC,UAAUxL,IAAI,SAACjB,EAAkBzC,GACnD,IAAMmP,EAAU1M,EAAM0M,QAAUxI,KAAKC,UAAUnE,EAAM0M,aAAS3L,EAAW,GAAK,KACxE4L,EAAyB,MAAXD,EACdE,EAAWC,OAAO7M,EAAM4M,UAC9B,OACEhO,EAAAtD,EAAAuD,cAAA,MAAIoM,IAAM1N,GACRqB,EAAAtD,EAAAuD,cAAA,cAAUmB,EAAMqD,MAAezE,EAAAtD,EAAAuD,cAAA,WAC7B8N,GACA/N,EAAAtD,EAAAuD,cAAAD,EAAAtD,EAAAsQ,SAAA,KAAEhN,EAAAtD,EAAAuD,cAAA,QAAMwD,UAAU,SAAUqK,GAAgB9N,EAAAtD,EAAAuD,cAAA,YAE5C+N,SCjDPE,GARoB,SAAAvO,GAAkB,IAAfyN,EAAezN,EAAfyN,SACpC,OACEpN,EAAAtD,EAAAuD,cAAA,OAAKwD,UAAU,iBACbzD,EAAAtD,EAAAuD,cAACkO,GAAD,CAAcf,SAAWA,GAAY,OCI5BgB,UARmB,WAChC,OACEpO,EAAAtD,EAAAuD,cAAA,OAAKwD,UAAU,gBACbzD,EAAAtD,EAAAuD,cAAA,mBCqBSoO,GApBO,WAEpB,OACErO,EAAAtD,EAAAuD,cAAA,OAAKwD,UAAU,OACbzD,EAAAtD,EAAAuD,cAACqO,EAAD,MACAtO,EAAAtD,EAAAuD,cAAA,YACED,EAAAtD,EAAAuD,cAACsO,EAAD,KACEvO,EAAAtD,EAAAuD,cAACuO,EAAD,KACExO,EAAAtD,EAAAuD,cAACyD,EAAA,EAAD,CAAQL,SAAWA,GACjBrD,EAAAtD,EAAAuD,cAACwO,GAAD,CAAU5L,KAAK,MACf7C,EAAAtD,EAAAuD,cAACyO,GAAD,CAAU7L,KAAK,oBACf7C,EAAAtD,EAAAuD,cAAC0O,GAAD,CAASC,SAAO,UCVVC,QACW,cAA7BtN,OAAO+B,SAASwL,UAEe,UAA7BvN,OAAO+B,SAASwL,UAEhBvN,OAAO+B,SAASwL,SAASC,MACvB,iECXNC,IAASC,OAAOjP,EAAAtD,EAAAuD,cAACiP,GAAD,MAASC,SAASC,eAAe,SDkI3C,kBAAmBC,WACrBA,UAAUC,cAAcC,MAAMC,KAAK,SAAAC,GACjCA,EAAaC","file":"static/js/main.1f358d87.chunk.js","sourcesContent":["import { createContext } from \"react\"\n\ntype Value = {\n  tree: TreeItem | null\n  treey: Treey | null\n}\n\nconst value = {\n  tree: null,\n  treey: null\n} as Value\n\nconst TreeyContext = createContext(value)\n\nexport default TreeyContext\n","import { useState, useEffect } from \"react\"\nimport treey from \"treey\"\nconst { treey: { init, read, createAndAdd, update, remove, move } } = treey\n\nconst useTreey = () => {\n  const [tree, setTree] = useState()\n  useEffect(() => {\n    (async () => {\n      const tree = await init()\n      setTree(tree)\n    })()\n  }, [])\n  const actions: Treey = {\n    read: async (id: Id) => {\n      return await read(id)\n    },\n    createAndAdd: async (data: Data, parentId: Id) => {\n      const tree = await createAndAdd(data, parentId)\n      setTree(tree)\n    },\n    update: async (id: Id, data: Data) => {\n      const tree = await update(id, data)\n      setTree(tree)\n    },\n    remove: async (id: Id, parentId: Id, index: Index) => {\n      const tree = await remove(id, parentId, index)\n      setTree(tree)\n    },\n    move: async (id: Id, oldParentId: Id, parentId: Id, oldIndex: Index, index: Index) => {\n      const tree = await move(id, oldParentId, parentId, oldIndex, index)\n      setTree(tree)\n    }\n  }\n  return [tree, actions]\n}\n\nexport default useTreey\n","import React, { ReactNode } from \"react\"\nimport TreeyContext from '../contexts/TreeyContext'\nimport useTreey from \"../hooks/useTreey\"\n\ntype Props = {\n  children: ReactNode\n}\n\nconst TreeyProvider: React.FC<Props> = ({ children }) => {\n\n  const [tree, treey] = useTreey()\n  const value = { tree, treey }\n\n  return (\n    <TreeyContext.Provider value={ value }>\n      { children }\n    </TreeyContext.Provider>\n  )\n}\n\nexport default TreeyProvider\n","import { createContext } from \"react\"\n\ntype Value = {\n  isShownForm (parents: Ids, isAdd?: boolean) : boolean\n  setShownForm (parents: Ids, isAdd?: boolean) : void\n  unsetShownForm () : void\n  itemIsOpen (ids: Ids) : boolean\n  setIsOpen (ids: Ids) : void\n  unsetIsOpen (ids: Ids) : void\n  isDragging () : boolean\n  itemIsDragging (ids: Ids) : boolean\n  setIsDragging (ids: Ids) : void\n  unsetIsDragging () : void\n}\n\nconst unimplemented = () => { throw new Error (\"UIContext not implemented\") }\n\nconst value = {\n  isShownForm: unimplemented,\n  setShownForm: unimplemented,\n  unsetShownForm: unimplemented,\n  itemIsOpen: unimplemented,\n  setIsOpen: unimplemented,\n  unsetIsOpen: unimplemented,\n  isDragging: unimplemented,\n  itemIsDragging: unimplemented,\n  setIsDragging: unimplemented,\n  unsetIsDragging: unimplemented\n} as Value\n\nconst UIContext = createContext(value)\n\nexport default UIContext\n","import { useEffect } from \"react\"\n\nconst useEscListener = (action: () => void) => {\n\n  useEffect(() => {\n    const handler = (event: KeyboardEvent) => {\n      if (event.keyCode === 27) {\n        event.preventDefault()\n        action()\n      }\n    }\n    window.addEventListener(\"keydown\", handler)\n    return () => window.removeEventListener(\"keydown\", handler)\n  }, [action])\n}\n\nexport default useEscListener\n","import React, { ReactNode, useState, useEffect } from \"react\"\nimport UIContext from '../contexts/UIContext'\nimport useEscListener from \"../hooks/useEscListener\"\nimport treey from \"treey\"\n\nconst { utils: { createFullName } } = treey\n\ntype Props = {\n  children: ReactNode\n}\n\nconst UIProvider: React.FC<Props> = ({ children }) => {\n\n  // shown form\n  const [shownForm, set] = useState<Path>()\n  const createPath = (parents: Ids, isAdd = false) : Path => {\n    const arr = parents.map(id => createFullName(id))\n    return (isAdd ? arr.concat(\"add\") : arr).join(\"/\")\n  }\n  const isShownForm = (parents: Ids, isAdd = false) => shownForm === createPath(parents, isAdd)\n  const setShownForm = (parents: Ids, isAdd = false) => set(createPath(parents, isAdd))\n  const unsetShownForm = () => set(undefined)\n\n  useEscListener(unsetShownForm)\n\n  useEffect(() => {\n    window.addEventListener(\"click\", unsetShownForm)\n    return () => window.removeEventListener(\"click\", unsetShownForm)\n  }, [])\n\n  // is opened\n  const [isOpen, setStateIsOpen] = useState<Paths>([])\n  const itemIsOpen = (ids: Ids) => {\n    const path = createPath(ids)\n    return isOpen.includes(path)\n  }\n  const setIsOpen = (ids: Ids) => {\n    if (itemIsOpen(ids)) return\n    const path = createPath(ids)\n    setStateIsOpen(isOpen.concat(path))\n  }\n  const unsetIsOpen = (ids: Ids) => {\n    const path = createPath(ids)\n    setStateIsOpen(isOpen.filter(i => i !== path))\n  }\n\n  // is dragging\n\n  const [isDragging, setStateIsDragging] = useState<Path>()\n  const anyItemIsDragging = () => isDragging !== undefined\n  const itemIsDragging = (ids: Ids) => isDragging === createPath(ids)\n  const setIsDragging = (ids: Ids) => setStateIsDragging(createPath(ids))\n  const unsetIsDragging = () => setStateIsDragging(undefined)\n\n  const value = {\n    isShownForm,\n    setShownForm,\n    unsetShownForm,\n    itemIsOpen,\n    setIsOpen,\n    unsetIsOpen,\n    isDragging: anyItemIsDragging,\n    itemIsDragging,\n    setIsDragging,\n    unsetIsDragging\n  }\n\n  return (\n    <UIContext.Provider value={ value }>\n      { children }\n    </UIContext.Provider>\n  )\n}\n\nexport default UIProvider\n","const basepath = window.location.host === \"gilleswittenberg.github.io\" ? \"/treey-react/\" : \"/\"\nexport default basepath\n","import React from \"react\"\nimport { Link } from \"@reach/router\"\nimport basepath from \"../utils/basepath\"\n\nimport \"../styles/Header.sass\"\n\nconst Header: React.SFC = () => {\n  const src = process.env.PUBLIC_URL + \"/images/logo_64x64.png\"\n  return (\n    <header className=\"Header\">\n      <Link to={ basepath }>\n        <h1><img src={ src } width=\"32px\" height=\"32px\" alt=\"木\" /></h1>\n        <h2>treey</h2>\n      </Link>\n    </header>\n  )\n}\n\nexport default Header\n","import React from \"react\"\n\nimport \"../styles/Spinner.sass\"\n\nconst Spinner: React.FC = () => (<p className=\"Spinner\">is loading&hellip;</p>)\n\nexport default Spinner\n","import React from \"react\"\n\ntype Props = {\n  data: Data\n}\n\nconst ItemData: React.FC<Props> = ({ data }) => {\n  const isUrl = /^https?:\\/\\//.test(data)\n  return (\n    <span className=\"ItemData\">\n      { isUrl ? <a href={ data } onClick={ event => event.stopPropagation() }>{ data }</a> : data }\n    </span>\n  )\n}\n\nexport default ItemData\n","import React from \"react\"\n\nimport \"../styles/Button.sass\"\n\ntype ButtonType = \"ADD\" | \"EDIT\" | \"DELETE\"\n\ntype Props = {\n  type: ButtonType\n  onClick?: () => void\n}\n\nconst typeToImageMap = (type: ButtonType) : string => {\n  switch (type) {\n  case \"ADD\": return \"add_64x64.png\"\n  case \"EDIT\": return \"submit_64x64.png\"\n  case \"DELETE\": return \"remove_64x64.png\"\n  }\n}\n\nconst Button: React.FC<Props> = ({ type, onClick }) => {\n  const className = \"Button \" + type\n  const backgroundImage = `url(\"${ process.env.PUBLIC_URL }/images/${ typeToImageMap(type) }\")`\n  const style = { backgroundImage }\n  return (\n    <button className={ className } style={ style } onClick={ onClick } title={ type }>{ type }</button>\n  )\n}\n\nexport default Button\n","const last = <T>(arr: T[]) => arr[arr.length - 1]\nexport default last\n","import treey from \"treey\"\nconst { utils: { createFullName } } = treey\n\nexport const getId = (item: TreeItem) : Id | undefined => item.state.ids && item.state.ids[0]\nexport const getData = (item: TreeItem) : Data => item.state && item.state.data\nexport const getPath = (id: Id | undefined, parents: Ids) : Ids => id ? parents.concat(id) : parents\nexport const getName = (id: Id | undefined, parents: Ids) : Name => getPath(id, parents).map(id => createFullName(id)).join(\"/\")\nexport const stringifyData = (data: Data) : string => {\n  if (typeof data === \"string\") return data\n  return JSON.stringify(data, undefined, 1)\n}\nexport const parseData = (str: string) : Data => {\n  try {\n    return JSON.parse(str)\n  } catch (err) {\n    return str\n  }\n}\n","const defer = (func: () => unknown) => { \n    window.setTimeout(func, 1)\n}\nexport default defer","import React, { useContext, useState } from \"react\"\nimport { useDrag, useDrop } from \"react-dnd\"\nimport { Link } from \"@reach/router\"\nimport cs from \"classnames\"\nimport TreeyContext from \"../contexts/TreeyContext\"\nimport UIContext from \"../contexts/UIContext\"\nimport ItemData from \"./ItemData\"\nimport Button from \"./Button\"\nimport basepath from \"../utils/basepath\"\nimport last from \"../utils/last\"\nimport { getId, getData, stringifyData, getName } from \"../utils/treeItemUtils\"\nimport defer from \"../utils/defer\"\n\ntype Props = {\n  path: Ids\n  index: Index\n  item: TreeItem\n  isOver: boolean\n  onClick: () => void\n  onClickAdd: () => void\n  onClickEdit: () => void\n  onClickDelete: () => void\n}\n\nconst ItemBody: React.FC<Props> = ({ path, index, item, isOver, onClick, onClickAdd, onClickEdit, onClickDelete }) => {\n\n  const id = getId(item)\n  const dropId = id\n  const parents = path.slice(0, -1)\n  const name = getName(id, parents)\n  const { isDragging: isDraggingGlobal, setIsDragging, unsetIsDragging, setIsOpen } = useContext(UIContext)\n  const { treey } = useContext(TreeyContext)\n  const isDraggingUIContext = isDraggingGlobal()\n\n  const [isHovered, setIsHovered] = useState(false)\n  const onMouseEnter = () => setIsHovered(true)\n  const onMouseLeave = () => setIsHovered(false)\n\n  const [{ isDragging }, drag] = useDrag({\n    item: { type: \"item\", parents, index, id, name },\n    begin: () => defer(() => setIsDragging(path)),\n    end: () => unsetIsDragging(),\n    collect: monitor => ({\n      isDragging: monitor.isDragging()\n    })\n  })\n\n  const hasRelations = item.relations.length > 0\n  const showAddButton = !hasRelations\n  const showButtons = isHovered && !isDragging && !isDraggingUIContext\n  const data = getData(item)\n  const dataString = stringifyData(data)\n  const linkTo = `${ basepath }item/${ item.name }`\n\n  const [{ isOver: isOverDeep }, drop] = useDrop({\n    accept: \"item\",\n    drop: async (item, monitor) => {\n\n      const draggableData = item as DraggableData\n      const id = draggableData.id\n      const oldParentId = last(draggableData.parents)\n      const oldIndex = draggableData.index\n      const parentId = dropId\n      if (parentId == null) return\n\n      // guard for null treey context\n      if (treey == null) return\n      await treey.move(id, oldParentId, parentId, oldIndex)\n      setIsOpen(path)\n    },\n    collect: monitor => ({\n      isOver: monitor.isOver({ shallow: true }),\n      canDrop: monitor.canDrop()\n    })\n  })\n\n  const isHidden = isDragging\n  const showDrop = (isOver && !hasRelations) || isOverDeep\n  const showDnDPlaceHolderChild = isOverDeep\n\n  return (\n    <div className={ cs(\"ItemBodyWrap\", { isHidden }) }>\n      <div\n        ref={ drag }\n        className={ cs(\"ItemBody\", { showAddButton, showButtons, showDrop }) }\n        onMouseEnter={ onMouseEnter }\n        onMouseLeave={ onMouseLeave }\n        >\n        <span onClick={ onClick }>\n          <ItemData data={ dataString } />\n          <Link to={ linkTo } className=\"info\">ⓘ</Link>\n        </span>\n        { showDrop &&\n          <div ref={ drop } className=\"ItemAddDrop\">\n            <Button type=\"ADD\" />\n          </div>\n        }\n        { showAddButton &&\n          <Button type=\"ADD\" onClick={ onClickAdd } />\n        }\n        <Button type=\"EDIT\" onClick={ onClickEdit } />\n        <Button type=\"DELETE\" onClick={ onClickDelete } />\n      </div>\n      <div className={ cs(\"dnd-placeholder\", \"dnd-placeholder-child\", { isShown: showDnDPlaceHolderChild }) }><div></div></div>\n    </div>\n  )\n}\n\nexport default ItemBody\n","import React, { useContext, useRef, useState } from \"react\"\nimport { useDrop } from 'react-dnd'\nimport TreeyContext from \"../contexts/TreeyContext\"\nimport ItemBody from \"./ItemBody\"\nimport { getId, getName } from \"../utils/treeItemUtils\"\nimport last from \"../utils/last\"\nimport cs from \"classnames\"\n\nimport \"../styles/ItemDnD.sass\"\n\ntype Props = {\n  parents: Ids\n  path: Ids\n  index: Index\n  item: TreeItem\n  onClick: () => void\n  onClickAdd: () => void\n  onClickEdit: () => void\n  onClickDelete: () => void\n}\n\ntype HoverRegion = \"top\" | \"bottom\"\n\nconst ItemDnD: React.FC<Props> = ({ parents, path, index, item, onClick, onClickAdd, onClickEdit, onClickDelete }) => {\n\n  const id = getId(item)\n  const name = getName(id, parents)\n\n  const { treey } = useContext(TreeyContext)\n  const ref = useRef<HTMLDivElement>(null)\n  const [hoverRegion, setHoverRegion] = useState<HoverRegion>()\n\n  const [{ canDrop, isOver }, drop] = useDrop({\n    accept: \"item\",\n    canDrop: (item, monitor) => monitor.getItem().name !== name,\n    hover: (item, monitor) => {\n      const clientOffset = monitor.getClientOffset()\n      const clientRect = ref && ref.current && ref.current.getBoundingClientRect()\n      if (clientRect && clientOffset) {\n        const itemHeight = 44\n        const verticalSpacing = 6\n        const h = itemHeight + 2 * verticalSpacing \n        const y = clientOffset.y - clientRect.top\n        const newHoverRegion = y <= h / 2 ? \"top\" : \"bottom\"\n        setHoverRegion(newHoverRegion)\n      }\n    },\n    drop: async (item, monitor) => {\n\n      // guard for nested drop targets\n      if (monitor.didDrop()) return\n\n      const draggableData = item as DraggableData\n      const id = draggableData.id\n      const oldParentId = last(draggableData.parents)\n      const oldIndex = draggableData.index\n      const parentId = last(parents)\n      // add one if hover over bottom\n      // substract one if draggable came from before droppable\n      const newIndex = index + (hoverRegion === \"bottom\" ? 1 : 0) - (oldParentId === parentId && oldIndex < index ? 1 : 0)\n      // guard for dropped on previous location\n      if (oldParentId === parentId && oldIndex === newIndex) return\n\n      // guard for null treey context\n      if (treey == null) return\n      await treey.move(id, oldParentId, parentId, oldIndex, newIndex)\n    },\n    collect: monitor => ({\n      isOver: monitor.isOver({ shallow: true }),\n      canDrop: monitor.canDrop()\n    })\n  })\n\n  const showPlaceholder = isOver && canDrop\n  const showPrePlaceholder = showPlaceholder && hoverRegion === \"top\"\n  const showPostPlaceholder = showPlaceholder && hoverRegion === \"bottom\"\n\n  return (\n    <div ref={ ref }>\n      <div ref={ drop }>\n        <div className={ cs(\"dnd-placeholder\", { isShown: showPrePlaceholder }) }><div></div></div>\n        <ItemBody\n          path={ path }\n          index={ index }\n          item={ item }\n          isOver={ isOver }\n          onClick={ onClick }\n          onClickAdd={ onClickAdd }\n          onClickEdit={ onClickEdit }\n          onClickDelete={ onClickDelete }\n        />\n        <div className={ cs(\"dnd-placeholder\", { isShown: showPostPlaceholder }) }><div></div></div>\n      </div>\n    </div>\n  )\n}\n\nexport default ItemDnD\n","import React, { useState, FormEvent } from \"react\"\nimport Button from \"./Button\"\n\ntype Props = {\n  submit: (value: string) => Promise<void>\n  initialValue?: string\n}\n\nconst ItemForm: React.FC<Props> = ({ submit, initialValue = \"\" }) => {\n\n  const [value, setValue] = useState(initialValue)\n\n  const onSubmit = async (event: FormEvent) => {\n    event.preventDefault()\n    await submit(value)\n  }\n\n  const onChange = (event: FormEvent) => {\n    setValue((event.target as HTMLInputElement).value)\n  }\n\n  return (\n    <form onSubmit={ onSubmit }>\n      <input type=\"text\" value={ value } onChange={ onChange } ref={ elem => elem && elem.focus() } />\n      <Button type=\"EDIT\" />\n    </form>\n  )\n}\n\nexport default ItemForm\n","import React, { useContext } from \"react\"\nimport TreeyContext from \"../contexts/TreeyContext\"\nimport UIContext from \"../contexts/UIContext\"\nimport ItemDnD from \"./ItemDnD\"\nimport ItemForm from \"./ItemForm\"\nimport Items from \"./Items\"\nimport { getId, getPath, getData, stringifyData, parseData } from \"../utils/treeItemUtils\"\nimport last from \"../utils/last\"\nimport cs from \"classnames\"\nimport { isEqual } from \"lodash\"\n\nimport \"../styles/Item.sass\"\n\ntype Props = {\n  parents: Ids\n  index: Index\n  item: TreeItem\n}\n\nconst Item: React.FC<Props> = ({ parents, index, item }) => {\n\n  const id = getId(item)\n  const parentId = last(parents)\n  const path = getPath(id, parents)\n  const data = getData(item)\n  const dataString = stringifyData(data)\n  const hasRelations = item.relations.length > 0\n\n  const { treey } = useContext(TreeyContext)\n  const remove = async () => {\n    if (treey == null) return\n    if (id == null) return\n    await treey.remove(id, parentId, index)\n  }\n  const { isShownForm, setShownForm, unsetShownForm, itemIsOpen, setIsOpen, unsetIsOpen, itemIsDragging } = useContext(UIContext)\n\n  const isOpen = itemIsOpen(path)\n  const isEditing = isShownForm(path)\n  const isDragging = itemIsDragging(path)\n  const showItem = isDragging || !isEditing\n  const showForm = !isDragging && isEditing\n  const showItems = !isDragging && ((isOpen && hasRelations) || isShownForm(path, true))\n\n  const onClick = () => {\n    if (isShownForm(path, true)) unsetShownForm()\n    const selection = window.getSelection()\n    if (selection && selection.toString() !== \"\") return\n    if (!hasRelations) return\n    if (!isOpen) return setIsOpen(path)\n    if (isOpen) return unsetIsOpen(path)\n  }\n  const onClickAdd = () => {\n    setShownForm(path, true)\n    setIsOpen(path)\n  }\n  const onClickEdit = () => setShownForm(path)\n  const onClickDelete = () => {\n    remove()\n    unsetIsOpen(path)\n  }\n  const submit = async (value: string) => {\n    unsetShownForm()\n    const trimmedValue = value.trim()\n    if (trimmedValue === \"\") return remove()\n    const newData = parseData(trimmedValue)\n    if (isEqual(data, newData)) return\n    if (treey == null) return\n    if (id == null) return\n    await treey.update(id, newData)\n  }\n\n  return (\n    <div className={ cs(\"Item\") } onClick={ event => event.stopPropagation() }>\n      <div className={ cs({ isHidden: !showItem }) }>\n        <ItemDnD\n          parents={ parents }\n          path={ path }\n          index={ index }\n          item={ item }\n          onClick={ onClick }\n          onClickAdd={ onClickAdd }\n          onClickEdit={ onClickEdit }\n          onClickDelete={ onClickDelete }\n        />\n      </div>\n      <div className={ cs(\"ItemFormWrap\", { isHidden: !showForm }) }>\n        <ItemForm submit={ submit } initialValue={ dataString } />\n      </div>\n      <div className={ cs({ isHidden: !showItems }) }>\n        <Items parents={ path } items={ item.relations } />\n      </div>\n    </div>\n  )\n}\n\nexport default Item\n","import React, { useContext } from \"react\"\nimport TreeyContext from \"../contexts/TreeyContext\"\nimport UIContext from \"../contexts/UIContext\"\nimport ItemForm from \"./ItemForm\"\nimport Button from \"./Button\"\nimport last from \"../utils/last\"\nimport { parseData } from \"../utils/treeItemUtils\"\n\nimport \"../styles/FormAdd.sass\"\n\ntype Props = {\n  parents: Ids\n}\n\nconst FormAdd: React.FC<Props> = ({ parents }) => {\n\n  const { isShownForm, setShownForm, unsetShownForm } = useContext(UIContext)\n  const { treey } = useContext(TreeyContext)\n\n  const showForm = isShownForm(parents, true)\n  const showButton = !showForm\n\n  const onClick = () => {\n    setShownForm(parents, true)\n  }\n\n  const submit = async (value: string) => {\n    unsetShownForm()\n    const trimmedValue = value.trim()\n    if (trimmedValue === \"\") return\n    if (treey === null) return\n    const parentId = last(parents)\n    if (parentId === undefined) return\n    const data = parseData(trimmedValue)\n    await treey.createAndAdd(data, parentId)\n  }\n\n  return (\n    <div className=\"FormAdd\" onClick={ event => event.stopPropagation() }>\n      { showButton &&\n        <Button onClick={ onClick } type=\"ADD\" />\n      }\n      { showForm &&\n        <ItemForm submit={ submit } />\n      }\n    </div>\n  )\n}\n\nexport default FormAdd\n","import React, { useContext } from \"react\"\nimport UIContext from \"../contexts/UIContext\"\nimport Item from \"./Item\"\nimport FormAdd from \"./FormAdd\"\n\nimport \"../styles/Items.sass\"\n\ntype Props = {\n  parents: Ids\n  items: TreeItems\n}\n\nconst Items: React.FC<Props> = ({ parents, items }) => {\n\n  const { isDragging } = useContext(UIContext)\n\n  const showItems = items.length > 0\n  const showFormAdd = !isDragging()\n\n  return (\n    <div className=\"Items\">\n      { showItems &&\n        <ul>\n          { items.map((item, index) => (\n              <li key={ item.name }>\n                <Item parents={ parents } index={ index } item={ item } />\n              </li>\n            ))\n          }\n        </ul>\n      }\n      { showFormAdd &&\n        <FormAdd parents={ parents } />\n      }\n    </div>\n  )\n}\n\nexport default Items\n","import React from \"react\"\nimport Items from \"./Items\"\nimport { DndProvider } from \"react-dnd\"\nimport HTML5Backend from \"react-dnd-html5-backend\"\n\nimport \"../styles/Tree.sass\"\n\ntype Props = {\n  tree: TreeItem\n  treey: Treey\n}\n\nconst Tree: React.FC<Props> = ({ tree, treey }) => {\n\n  const items = tree && tree.relations\n  const id = tree && tree.state.ids && tree.state.ids[0]\n  const parents = [id]\n\n  return (\n    <div className=\"Tree\">\n      { id &&\n        <DndProvider backend={ HTML5Backend }>\n          <Items parents={ parents } items={ items } />\n        </DndProvider>\n      }\n    </div>\n  )\n}\n\nexport default Tree\n","import React, { useContext } from \"react\"\nimport { RouteComponentProps } from \"@reach/router\"\nimport TreeyContext from \"../contexts/TreeyContext\"\nimport Spinner from \"../components/Spinner\"\nimport Tree from \"../components/Tree\"\n\nimport \"../styles/Home.sass\"\n\ntype Props = RouteComponentProps\n\nconst PageHome: React.FC<Props> = () => {\n\n  const { tree, treey } = useContext(TreeyContext)\n  const showSpinner = tree == null\n  const showTree = tree != null && treey != null\n  const name = tree != null ? tree.name : \"\"\n\n  return (\n    <div className=\"Page PageHome\">\n      { showSpinner &&\n        <Spinner/>\n      }\n      { showTree &&\n        <>\n          <h1 className=\"RootItem\">{ name }</h1>\n          <Tree tree={ tree! } treey={ treey! } />\n        </>\n      }\n    </div>\n  )\n}\n\nexport default PageHome\n","import React, { useState, useContext, useEffect } from \"react\"\nimport TreeyContext from \"../contexts/TreeyContext\"\nimport treey from \"treey\"\n\nimport \"../styles/ItemOverview.sass\"\n\nconst { utils: { parseFullName } } = treey\n\ntype Props = {\n  fullName: string\n}\n\nconst ItemOverview: React.FC<Props> = ({ fullName }) => {\n\n  const [item, setItem] = useState<TreeItem>()\n  const [notFound, setNotFound] = useState(false)\n  const [invalidFullName, setInvalidFullName] = useState(false)\n  const { treey } = useContext(TreeyContext)\n\n  useEffect(() => {\n    if (treey == null) return\n    const id = parseFullName(fullName)\n    if (id == null) {\n      setInvalidFullName(true)\n      return\n    }\n    (async () => {\n      const item = await treey.read(id)\n      item !== undefined ? setItem(item) : setNotFound(true)\n    })()\n  }, [treey, fullName])\n\n  const isLoading = notFound === false && invalidFullName === false && item == null\n  const showItem = item != null\n  const itemName = item && item.name\n  const state = item && JSON.stringify(item.state, undefined, 2)\n\n  return (\n    <div className=\"ItemOverview\">\n      { isLoading &&\n        <p>is loading&hellip;</p>\n      }\n      { invalidFullName &&\n        <p>{ fullName } is not valid</p>\n      }\n      { notFound &&\n        <p>{ fullName } not found</p>\n      }\n      { showItem &&\n        <>\n          <h1>{ itemName }</h1>\n          <h2>state</h2>\n          <p className=\"small pre\">{ state }</p>\n          <h2>events</h2>\n          <ul>\n            { item && item.events.reverse().map((event: ItemEvent, index: number) => {\n                const payload = event.payload ? JSON.stringify(event.payload, undefined, 1) : null\n                const showPayload = payload != null\n                const datetime = String(event.datetime)\n                return (\n                  <li key={ index }>\n                    <strong>{ event.type }</strong><br/>\n                    { showPayload &&\n                      <><span className=\"small\">{ payload }</span><br/></>\n                    }\n                    { datetime }\n                  </li>\n                )\n              })\n            }\n          </ul>\n        </>\n      }\n    </div>\n  )\n}\n\nexport default ItemOverview\n","import React from \"react\"\nimport { RouteComponentProps } from \"@reach/router\"\nimport ItemOverview from \"../components/ItemOverview\"\n\ntype Props = RouteComponentProps & {\n  fullName?: string\n}\n\nconst PageItem: React.SFC<Props> = ({ fullName }) => {\n  return (\n    <div className=\"Page PageItem\">\n      <ItemOverview fullName={ fullName || \"\" } />\n    </div>\n  )\n}\n\nexport default PageItem\n","import React from \"react\"\nimport { RouteComponentProps } from \"@reach/router\"\n\nimport \"../styles/Page404.sass\"\n\ntype Props = RouteComponentProps\n\nconst Page404: React.SFC<Props> = () => {\n  return (\n    <div className=\"Page Page404\">\n      <p>404</p>\n    </div>\n  )\n}\n\nexport default Page404\n","import React from \"react\"\nimport TreeyProvider from \"./components/TreeyProvider\"\nimport UIProvider from \"./components/UIProvider\"\nimport { Router } from \"@reach/router\"\nimport basepath from \"./utils/basepath\"\nimport Header from \"./components/Header\"\nimport PageHome from \"./pages/Home\"\nimport PageItem from \"./pages/Item\"\nimport Page404 from \"./pages/404\"\n\n\nconst App: React.FC = () => {\n\n  return (\n    <div className=\"App\">\n      <Header/>\n      <main>\n        <TreeyProvider>\n          <UIProvider>\n            <Router basepath={ basepath }>\n              <PageHome path=\"/\" />\n              <PageItem path=\"/item/:fullName\" />\n              <Page404 default />\n            </Router>\n          </UIProvider>\n        </TreeyProvider>\n      </main>\n    </div>\n  )\n}\n\nexport default App\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\"\nimport ReactDOM from \"react-dom\"\nimport App from \"./App\"\nimport * as serviceWorker from \"./serviceWorker\"\n\nimport \"./styles/screen.sass\"\n\nReactDOM.render(<App />, document.getElementById(\"root\"))\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister()\n"],"sourceRoot":""}