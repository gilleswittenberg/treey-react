{"version":3,"sources":["contexts/TreeyContext.ts","hooks/useTreey.ts","components/TreeyProvider.tsx","contexts/UIContext.ts","utils/tree/pruneTree.ts","utils/treeItemUtils.ts","utils/tree/flattenTree.ts","utils/tree/appendAddToSiblings.ts","hooks/usePathState.ts","hooks/usePathsState.ts","components/UIProvider.tsx","utils/basepath.ts","components/Header.tsx","components/Spinner.tsx","components/ItemData.tsx","components/Button.tsx","utils/defer.ts","components/ItemBody.tsx","components/ItemDnD.tsx","components/ItemForm.tsx","components/Item.tsx","components/FormAdd.tsx","components/Items.tsx","utils/last.ts","components/KeyboardEvents.tsx","components/MouseEvents.tsx","components/Tree.tsx","pages/Home.tsx","components/ItemOverview.tsx","pages/Item.tsx","pages/404.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["TreeyContext","createContext","tree","treey","init","read","createAndAdd","update","remove","move","useTreey","_useState","useState","_useState2","Object","slicedToArray","setTree","useEffect","asyncToGenerator","regenerator_default","a","mark","_callee","wrap","_context","prev","next","sent","stop","actions","_read2","_callee2","id","_context2","abrupt","_x","apply","this","arguments","_createAndAdd2","_callee3","data","parentId","_context3","_x2","_x3","_update2","_callee4","_context4","_x4","_x5","_remove2","_callee5","index","_context5","_x6","_x7","_x8","_move2","_callee6","oldParentId","oldIndex","_context6","_x9","_x10","_x11","_x12","_x13","TreeyProvider","_ref","children","_useTreey","_useTreey2","value","react_default","createElement","contexts_TreeyContext","Provider","unimplemented","Error","isShownForm","setShownForm","unsetShownForm","isOpen","setOpen","unsetOpen","isDragging","setDragging","unsetDragging","active","undefined","isActive","setActive","changeActive","clear","UIContext","pruneTree","prunedTree","forEach","treeItem","treeItemIsOpen","includes","path","hasRelations","relations","length","newTreeItem","_objectSpread","push","utils","createFullName","parseFullName","getId","item","state","ids","getData","stringifyData","JSON","stringify","parseData","str","parse","err","createPathAdd","concat","parsePath","split","map","filter","isPathAdd","slice","mapTreeItem","parents","flattenTree_objectSpread","join","createPath","relation","flat","Infinity","flattenTree","appendAddToSiblings","parentPath","newTree","basePath","treeItemAdd","events","name","isCyclic","isKnown","isDestroyed","appendAddToSiblings_objectSpread","usePathState","setPath","p","usePathsState","paths","setPaths","is","UIProvider","_usePathState","_usePathState2","_usePathsState","_usePathsState2","open","_usePathState3","_usePathState4","_usePathState5","_usePathState6","unsetActive","useContext","direction","treeWithAdd","arr","items","setFirstItemActive","findIndex","followingIndex","l","pathAdd","contexts_UIContext","basepath","window","location","host","Header","className","es","to","src","process","width","height","alt","Spinner","ItemData","isUrl","test","href","onClick","event","stopPropagation","Button","type","style","backgroundImage","typeToImageMap","title","defer","func","setTimeout","ItemBody","parent","isOver","onDoubleClick","onClickAdd","onClickEdit","onClickDelete","dropId","_useContext","isDraggingGlobal","itemIsActive","isDraggingUIContext","isHovered","setIsHovered","_useDrag","useDrag","begin","end","collect","monitor","_useDrag2","drag","showAddButton","showButtons","dataString","linkTo","_useDrop","useDrop","accept","drop","_drop","draggableData","shallow","canDrop","_useDrop2","isOverDeep","isDisabled","showDrop","showDnDPlaceHolderChild","cs","ref","onMouseEnter","onMouseLeave","components_ItemData","components_Button","isShown","ItemDnD","useRef","hoverRegion","setHoverRegion","getItem","hover","clientOffset","getClientOffset","clientRect","current","getBoundingClientRect","y","top","h","newIndex","didDrop","_useDrop2$","showPlaceholder","showPrePlaceholder","showPostPlaceholder","components_ItemBody","ItemForm","submit","_ref$initialValue","initialValue","setValue","onSubmit","_ref2","preventDefault","onChange","target","elem","focus","Item","_useContext2","itemIsOpen","itemIsDragging","isEditing","showItem","showForm","showItems","previousPath","oldPath","_ref3","_ref4","trimmedValue","newData","trim","isEqual","isHidden","components_ItemDnD","selection","getSelection","toString","components_ItemForm","components_Items","FormAdd","show","Items","key","components_Item","components_FormAdd","last","KeyboardEvents","canOpen","compareIds","id1","protocol","getRelationFromItemById","find","getItemFromPath","handler","keyCode","t0","shiftKey","addEventListener","removeEventListener","MouseEvents","Tree","hasTree","Fragment","components_KeyboardEvents","components_MouseEvents","esm","backend","HTML5Backend","PageHome","showSpinner","showTree","components_Spinner","components_Tree","ItemOverview","fullName","setItem","_useState3","_useState4","notFound","setNotFound","_useState5","_useState6","invalidFullName","setInvalidFullName","isLoading","itemName","reverse","payload","showPayload","datetime","String","PageItem","components_ItemOverview","Page404","App","components_Header","components_TreeyProvider","components_UIProvider","pages_Home","pages_Item","_404","default","Boolean","hostname","match","ReactDOM","render","src_App","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.ae80b305.chunk.js","sourcesContent":["import { createContext } from \"react\"\n\ntype Value = {\n  tree: TreeItem | null\n  treey: Treey | null\n}\n\nconst value = {\n  tree: null,\n  treey: null\n} as Value\n\nconst TreeyContext = createContext(value)\n\nexport default TreeyContext\n","import { useState, useEffect } from \"react\"\nimport treey from \"treey\"\nconst { treey: { init, read, createAndAdd, update, remove, move } } = treey\n\nconst useTreey = () => {\n  const [tree, setTree] = useState()\n  useEffect(() => {\n    (async () => {\n      const tree = await init()\n      setTree(tree)\n    })()\n  }, [])\n  const actions: Treey = {\n    read: async (id: Id) => {\n      return await read(id)\n    },\n    createAndAdd: async (data: Data, parentId: Id) => {\n      const tree = await createAndAdd(data, parentId)\n      setTree(tree)\n    },\n    update: async (id: Id, data: Data) => {\n      const tree = await update(id, data)\n      setTree(tree)\n    },\n    remove: async (id: Id, parentId: Id, index?: Index) => {\n      const tree = await remove(id, parentId, index)\n      setTree(tree)\n    },\n    move: async (id: Id, oldParentId: Id, parentId: Id, oldIndex?: Index, index?: Index) => {\n      const tree = await move(id, oldParentId, parentId, oldIndex, index)\n      setTree(tree)\n    }\n  }\n  return [tree, actions]\n}\n\nexport default useTreey\n","import React, { ReactNode } from \"react\"\nimport TreeyContext from '../contexts/TreeyContext'\nimport useTreey from \"../hooks/useTreey\"\n\ntype Props = {\n  children: ReactNode\n}\n\nconst TreeyProvider: React.FC<Props> = ({ children }) => {\n\n  const [tree, treey] = useTreey()\n  const value = { tree, treey }\n\n  return (\n    <TreeyContext.Provider value={ value }>\n      { children }\n    </TreeyContext.Provider>\n  )\n}\n\nexport default TreeyProvider\n","import { createContext } from \"react\"\n\ntype Value = {\n  isShownForm (path?: Path) : boolean\n  setShownForm (path: Path) : void\n  unsetShownForm () : void\n  isOpen (path: Path) : boolean\n  setOpen (path: Path) : void\n  unsetOpen (path: Path) : void\n  isDragging (path?: Path) : boolean\n  setDragging (path: Path) : void\n  unsetDragging () : void\n  active: Path | undefined\n  isActive (path?: Path) : boolean\n  setActive (path: Path) : void\n  changeActive (direction?: Direction) : void\n  clear (path: Path) : void\n}\n\nconst unimplemented = () => { throw new Error (\"UIContext not implemented\") }\n\nconst value = {\n  isShownForm: unimplemented,\n  setShownForm: unimplemented,\n  unsetShownForm: unimplemented,\n  isOpen: unimplemented,\n  setOpen: unimplemented,\n  unsetOpen: unimplemented,\n  isDragging: unimplemented,\n  setDragging: unimplemented,\n  unsetDragging: unimplemented,\n  active: undefined,\n  isActive: unimplemented,\n  setActive: unimplemented,\n  changeActive: unimplemented,\n  clear: unimplemented\n} as Value\n\nconst UIContext = createContext(value)\n\nexport default UIContext\n","const pruneTree = (tree: TreeItems, isOpen: Paths) : TreeItems => {\n  const prunedTree: TreeItems = []\n  tree.forEach(treeItem => {\n    const treeItemIsOpen = isOpen.includes(treeItem.path!)\n    const hasRelations = treeItem.relations.length > 1\n    const shouldPrune = treeItemIsOpen && hasRelations\n    const relations = shouldPrune ? pruneTree(treeItem.relations, isOpen) : []\n    const newTreeItem = { ...treeItem, relations }\n    prunedTree.push(newTreeItem)\n  })\n  return prunedTree\n}\nexport default pruneTree\n","import treey from \"treey\"\nconst { utils: { createFullName, parseFullName } } = treey\n\nexport { createFullName }\nexport { parseFullName }\n\nexport const getId = (item: TreeItem) : Id | undefined => item.state.ids && item.state.ids[0]\nexport const getData = (item: TreeItem) : Data => item.state && item.state.data\n\nexport const stringifyData = (data: Data) : string => {\n  if (typeof data === \"string\") return data\n  return JSON.stringify(data, undefined, 1)\n}\nexport const parseData = (str: string) : Data => {\n  try {\n    return JSON.parse(str)\n  } catch (err) {\n    return str\n  }\n}\n\nexport const createPath = (ids: Ids) => ids.map(id => createFullName(id)).join(\"/\")\nexport const createPathAdd = (path: Path) => `${ path }/add`\nexport const parsePath = (path: Path) : Ids => {\n  const strs = path.split(\"/\")\n  const ids = strs.map(id => parseFullName(id))\n  return ids.filter((id: Id | undefined) : id is Id => id !== undefined)\n}\nexport const isPathAdd = (path: Path) : boolean => {\n  return path.slice(-4) === \"/add\"\n}\nexport const getItemFromPath = (tree: TreeItem, path: Path) : TreeItem | undefined => {\n  const compareIds = (id: Id | undefined, id1: Id | undefined) => {\n    if (id === undefined || id1 === undefined) return false\n    return id.name === id1.name && id.protocol === id1.protocol\n  }\n  const getRelationFromItemById = (treeItem: TreeItem, id: Id) : TreeItem | undefined => {\n    return treeItem.relations.find(item => compareIds(getId(item), id))\n  }\n  let ids = parsePath(path)\n  if (compareIds(getId(tree), ids[0]) === false) return undefined\n  ids = ids.slice(1)\n  let item: TreeItem | undefined = tree\n  while (ids.length > 0) {\n    const id = ids[0]\n    ids = ids.slice(1)\n    item = getRelationFromItemById(item, id)\n    if (item === undefined) return undefined\n  }\n  return item\n}\n","import { getId, createPath } from \"../treeItemUtils\"\n\nconst mapTreeItem = (treeItem: TreeItem, parents: Ids) : TreeItems => {\n  const id = getId(treeItem)\n  const ids = id !== undefined ? parents.concat(id) : parents\n  const path = treeItem.path ? treeItem.path : createPath(ids)\n  const newTreeItem = { ...treeItem, path }\n  return [newTreeItem, newTreeItem.relations.map(relation => mapTreeItem(relation, ids))].flat(Infinity) as TreeItems\n}\nconst flattenTree = (tree: TreeItems) : TreeItems => {\n  return tree.map(treeItem => mapTreeItem(treeItem, [])).flat(Infinity) as TreeItems\n}\nexport default flattenTree\n","import { getId, createFullName, createPathAdd } from \"../treeItemUtils\"\n\nconst appendAddToSiblings = (tree: TreeItems, parentPath?: Path) : TreeItems => {\n  const newTree: TreeItems = []\n  tree.forEach((treeItem, index) => {\n    const basePath = parentPath ? `${ parentPath }/${ index }/` : \"\"\n    const path = `${ basePath }${ createFullName(getId(treeItem)!) }`\n    const relations = appendAddToSiblings(treeItem.relations, path)\n    const treeItemAdd: TreeItem = {\n      state: {},\n      events: [],\n      relations: [],\n      name: \"add\",\n      isCyclic: false,\n      isKnown: true,\n      isDestroyed: false,\n      path: createPathAdd(path)\n    }\n    relations.push(treeItemAdd)\n    const newTreeItem = { ...treeItem, relations, path }\n    newTree.push(newTreeItem)\n  })\n  return newTree\n}\nexport default appendAddToSiblings\n","import { useState } from \"react\"\n\ntype UsePathState = [\n  Path | undefined,\n  (p?: Path) => boolean,\n  (p: Path) => void,\n  () => void\n]\n\nconst usePathState = () : UsePathState => {\n  const [path, setPath] = useState<Path>()\n  const is = (p?: Path) => p === undefined ? path !== undefined : p === path\n  const set = (p: Path) => setPath(p)\n  const unset = () => setPath(undefined)\n  return [path, is, set, unset]\n}\nexport default usePathState\n","import { useState } from \"react\"\n\ntype UsePathsState = [\n  Paths,\n  (p: Path) => boolean,\n  (p: Path) => void,\n  (p: Path) => void\n]\n\nconst usePathsState = () : UsePathsState => {\n  const [paths, setPaths] = useState<Paths>([])\n  const is = (p: Path) => paths.includes(p)\n  const set = (p: Path) => {\n    if (is(p)) return\n    setPaths(paths.concat(p))\n  }\n  const unset = (p: Path) => {\n    setPaths(paths.filter(path => path !== p))\n  }\n  return [paths, is, set, unset]\n}\nexport default usePathsState\n","import React, { useContext, ReactNode } from \"react\"\nimport UIContext from '../contexts/UIContext'\nimport TreeyContext from '../contexts/TreeyContext'\nimport pruneTree from \"../utils/tree/pruneTree\"\nimport flattenTree from \"../utils/tree/flattenTree\"\nimport appendAddToSiblings from \"../utils/tree/appendAddToSiblings\"\nimport { getId, createFullName, createPathAdd } from \"../utils/treeItemUtils\"\nimport usePathState from \"../hooks/usePathState\"\nimport usePathsState from \"../hooks/usePathsState\"\n\ntype Props = {\n  children: ReactNode\n}\n\nconst UIProvider: React.FC<Props> = ({ children }) => {\n\n  // shown form\n  const [, isShownForm, setShownForm, unsetShownForm] = usePathState()\n\n  // is opened\n  const [open, isOpen, setOpen, unsetOpen] = usePathsState()\n\n  // is dragging\n  const [, isDragging, setDragging, unsetDragging] = usePathState()\n\n  // is active\n  const [active, isActive, setActive, unsetActive] = usePathState()\n\n  const { tree } = useContext(TreeyContext)\n  const changeActive = (direction: Direction = \"next\") => {\n\n    if (tree == null) return\n\n    const treeWithAdd = appendAddToSiblings([tree])\n    const rootPath = createFullName(getId(tree)!)\n    const arr = [rootPath].concat(open)\n\n    const prunedTree = pruneTree(treeWithAdd, arr)\n    const flattenedArr = flattenTree(prunedTree)\n    // remove root item\n    const items = flattenedArr.slice(1)\n\n    const setFirstItemActive = () => {\n      const path = items[0].path!\n      setActive(path)\n    }\n\n    if (isActive() === false) {\n      setFirstItemActive()\n    } else {\n      const index = items.findIndex(item => isActive(item.path))\n      if (index === -1) return setFirstItemActive()\n      const followingIndex = direction === \"next\" ? index + 1 : index - 1\n      const l = items.length - 1\n      const i =\n        followingIndex > l ? 0 :\n        followingIndex < 0 ? l :\n        followingIndex\n      const path = items[i].path!\n      setActive(path)\n    }\n  }\n\n  const clear = (path: Path) => {\n    const pathAdd = createPathAdd(path)\n    if (isShownForm(path) || isShownForm(pathAdd)) unsetShownForm()\n    if (isActive(path) || isShownForm(pathAdd)) unsetActive()\n    if (isDragging(path)) unsetDragging()\n    if (isOpen(path)) unsetOpen(path)\n  }\n\n  const value = {\n    isShownForm,\n    setShownForm,\n    unsetShownForm,\n    isOpen,\n    setOpen,\n    unsetOpen,\n    isDragging,\n    setDragging,\n    unsetDragging,\n    active,\n    isActive,\n    setActive,\n    changeActive,\n    clear\n  }\n\n  return (\n    <UIContext.Provider value={ value }>\n      { children }\n    </UIContext.Provider>\n  )\n}\n\nexport default UIProvider\n","const basepath = window.location.host === \"gilleswittenberg.github.io\" ? \"/treey-react/\" : \"/\"\nexport default basepath\n","import React from \"react\"\nimport { Link } from \"@reach/router\"\nimport basepath from \"../utils/basepath\"\n\nimport \"../styles/Header.sass\"\n\nconst Header: React.SFC = () => {\n  const src = process.env.PUBLIC_URL + \"/images/logo_64x64.png\"\n  return (\n    <header className=\"Header\">\n      <Link to={ basepath }>\n        <h1><img src={ src } width=\"32px\" height=\"32px\" alt=\"木\" /></h1>\n        <h2>treey</h2>\n      </Link>\n    </header>\n  )\n}\n\nexport default Header\n","import React from \"react\"\n\nimport \"../styles/Spinner.sass\"\n\nconst Spinner: React.FC = () => (<p className=\"Spinner\">is loading&hellip;</p>)\n\nexport default Spinner\n","import React from \"react\"\n\ntype Props = {\n  data: Data\n}\n\nconst ItemData: React.FC<Props> = ({ data }) => {\n  const isUrl = /^https?:\\/\\//.test(data)\n  return (\n    <span className=\"ItemData\">\n      { isUrl ? <a href={ data } onClick={ event => event.stopPropagation() }>{ data }</a> : data }\n    </span>\n  )\n}\n\nexport default ItemData\n","import React from \"react\"\n\nimport \"../styles/Button.sass\"\n\ntype ButtonType = \"ADD\" | \"EDIT\" | \"DELETE\"\n\ntype Props = {\n  type: ButtonType\n  onClick?: () => void\n}\n\nconst typeToImageMap = (type: ButtonType) : string => {\n  switch (type) {\n  case \"ADD\": return \"add_64x64.png\"\n  case \"EDIT\": return \"submit_64x64.png\"\n  case \"DELETE\": return \"remove_64x64.png\"\n  }\n}\n\nconst Button: React.FC<Props> = ({ type, onClick }) => {\n  const className = \"Button \" + type\n  const backgroundImage = `url(\"${ process.env.PUBLIC_URL }/images/${ typeToImageMap(type) }\")`\n  const style = { backgroundImage }\n  return (\n    <button className={ className } style={ style } onClick={ onClick } title={ type }>{ type }</button>\n  )\n}\n\nexport default Button\n","const defer = (func: () => unknown) => { \n    window.setTimeout(func, 1)\n}\nexport default defer","import React, { useContext, useState } from \"react\"\nimport { useDrag, useDrop } from \"react-dnd\"\nimport { Link } from \"@reach/router\"\nimport cs from \"classnames\"\nimport TreeyContext from \"../contexts/TreeyContext\"\nimport UIContext from \"../contexts/UIContext\"\nimport ItemData from \"./ItemData\"\nimport Button from \"./Button\"\nimport basepath from \"../utils/basepath\"\nimport { getId, getData, stringifyData } from \"../utils/treeItemUtils\"\nimport defer from \"../utils/defer\"\n\ntype Props = {\n  path: Path\n  parent: Id\n  index: Index\n  item: TreeItem\n  isOver: boolean\n  onClick: () => void\n  onDoubleClick: () => void\n  onClickAdd: () => void\n  onClickEdit: () => void\n  onClickDelete: () => void\n}\n\nconst ItemBody: React.FC<Props> = ({ path, parent, index, item, isOver, onClick, onDoubleClick, onClickAdd, onClickEdit, onClickDelete }) => {\n\n  const id = getId(item)\n  const dropId = id\n  const { isDragging: isDraggingGlobal, setDragging, unsetDragging, setOpen, isActive: itemIsActive } = useContext(UIContext)\n  const { treey } = useContext(TreeyContext)\n  const isDraggingUIContext = isDraggingGlobal()\n  const isActive = itemIsActive(path)\n\n  const [isHovered, setIsHovered] = useState(false)\n  const onMouseEnter = () => setIsHovered(true)\n  const onMouseLeave = () => setIsHovered(false)\n\n  const [{ isDragging }, drag] = useDrag({\n    item: { type: \"item\", parent, index, id, path },\n    begin: () => defer(() => setDragging(path)),\n    end: () => unsetDragging(),\n    collect: monitor => ({\n      isDragging: monitor.isDragging()\n    })\n  })\n\n  const hasRelations = item.relations.length > 0\n  const showAddButton = !hasRelations\n  const showButtons = isHovered && !isDragging && !isDraggingUIContext\n  const data = getData(item)\n  const dataString = stringifyData(data)\n  const linkTo = `${ basepath }item/${ item.name }`\n\n  const [{ isOver: isOverDeep }, drop] = useDrop({\n    accept: \"item\",\n    drop: async (item, monitor) => {\n\n      const draggableData = item as DraggableData\n      const id = draggableData.id\n      const oldParentId = draggableData.parent\n      const oldIndex = draggableData.index\n      const parentId = dropId\n      if (parentId == null) return\n\n      // guard for null treey context\n      if (treey == null) return\n      await treey.move(id, oldParentId, parentId, oldIndex)\n      setOpen(path)\n    },\n    collect: monitor => ({\n      isOver: monitor.isOver({ shallow: true }),\n      canDrop: monitor.canDrop()\n    })\n  })\n\n  const isDisabled = isDragging\n  const showDrop = (isOver && !hasRelations) || isOverDeep\n  const showDnDPlaceHolderChild = isOverDeep\n\n  return (\n    <div className={ cs(\"ItemBodyWrap\", { isActive, isDisabled }) }>\n      <div\n        ref={ drag }\n        className={ cs(\"ItemBody\", { showAddButton, showButtons, showDrop }) }\n        onMouseEnter={ onMouseEnter }\n        onMouseLeave={ onMouseLeave }\n        >\n        <span onClick={ onClick } onDoubleClick={ onDoubleClick }>\n          <ItemData data={ dataString } />\n          <Link to={ linkTo } className=\"info\">ⓘ</Link>\n        </span>\n        { showDrop &&\n          <div ref={ drop } className=\"ItemAddDrop\">\n            <Button type=\"ADD\" />\n          </div>\n        }\n        { showAddButton &&\n          <Button type=\"ADD\" onClick={ onClickAdd } />\n        }\n        <Button type=\"EDIT\" onClick={ onClickEdit } />\n        <Button type=\"DELETE\" onClick={ onClickDelete } />\n      </div>\n      <div className={ cs(\"DnDPlaceholder\", \"DnDPlaceholderChild\", { isShown: showDnDPlaceHolderChild }) }><div></div></div>\n    </div>\n  )\n}\n\nexport default ItemBody\n","import React, { useContext, useRef, useState } from \"react\"\nimport { useDrop } from 'react-dnd'\nimport TreeyContext from \"../contexts/TreeyContext\"\nimport ItemBody from \"./ItemBody\"\nimport cs from \"classnames\"\n\nimport \"../styles/ItemDnD.sass\"\n\ntype Props = {\n  parent: Id\n  path: Path\n  index: Index\n  item: TreeItem\n  onClick: () => void\n  onDoubleClick: () => void\n  onClickAdd: () => void\n  onClickEdit: () => void\n  onClickDelete: () => void\n}\n\ntype HoverRegion = \"top\" | \"bottom\"\n\nconst ItemDnD: React.FC<Props> = ({ parent, path, index, item, onClick, onDoubleClick, onClickAdd, onClickEdit, onClickDelete }) => {\n\n  const { treey } = useContext(TreeyContext)\n  const ref = useRef<HTMLDivElement>(null)\n  const [hoverRegion, setHoverRegion] = useState<HoverRegion>()\n\n  const [{ canDrop, isOver }, drop] = useDrop({\n    accept: \"item\",\n    canDrop: (item, monitor) => monitor.getItem().path !== path,\n    hover: (item, monitor) => {\n      const clientOffset = monitor.getClientOffset()\n      const clientRect = ref && ref.current && ref.current.getBoundingClientRect()\n      if (clientRect && clientOffset) {\n        const itemHeight = 44\n        const verticalSpacing = 6\n        const h = itemHeight + 2 * verticalSpacing\n        const y = clientOffset.y - clientRect.top\n        const newHoverRegion = y <= h / 2 ? \"top\" : \"bottom\"\n        setHoverRegion(newHoverRegion)\n      }\n    },\n    drop: async (item, monitor) => {\n\n      // guard for nested drop targets\n      if (monitor.didDrop()) return\n\n      const draggableData = item as DraggableData\n      const id = draggableData.id\n      const oldParentId = draggableData.parent\n      const oldIndex = draggableData.index\n      // add one if hover over bottom\n      // substract one if draggable came from before droppable\n      const newIndex = index + (hoverRegion === \"bottom\" ? 1 : 0) - (oldParentId === parent && oldIndex < index ? 1 : 0)\n      // guard for dropped on previous location\n      if (oldParentId === parent && oldIndex === newIndex) return\n\n      // guard for null treey context\n      if (treey == null) return\n      await treey.move(id, oldParentId, parent, oldIndex, newIndex)\n    },\n    collect: monitor => ({\n      isOver: monitor.isOver({ shallow: true }),\n      canDrop: monitor.canDrop()\n    })\n  })\n\n  const showPlaceholder = isOver && canDrop\n  const showPrePlaceholder = showPlaceholder && hoverRegion === \"top\"\n  const showPostPlaceholder = showPlaceholder && hoverRegion === \"bottom\"\n\n  return (\n    <div ref={ ref }>\n      <div ref={ drop }>\n        <div className={ cs(\"DnDPlaceholder\", { isShown: showPrePlaceholder }) }><div></div></div>\n        <ItemBody\n          path={ path }\n          parent={ parent }\n          index={ index }\n          item={ item }\n          isOver={ isOver }\n          onClick={ onClick }\n          onDoubleClick={ onDoubleClick }\n          onClickAdd={ onClickAdd }\n          onClickEdit={ onClickEdit }\n          onClickDelete={ onClickDelete }\n        />\n        <div className={ cs(\"DnDPlaceholder\", { isShown: showPostPlaceholder }) }><div></div></div>\n      </div>\n    </div>\n  )\n}\n\nexport default ItemDnD\n","import React, { useState, FormEvent } from \"react\"\nimport Button from \"./Button\"\n\ntype Props = {\n  submit: (value: string) => Promise<void>\n  initialValue?: string\n}\n\nconst ItemForm: React.FC<Props> = ({ submit, initialValue = \"\" }) => {\n\n  const [value, setValue] = useState(initialValue)\n\n  const onSubmit = async (event: FormEvent) => {\n    event.preventDefault()\n    await submit(value)\n  }\n\n  const onChange = (event: FormEvent) => {\n    setValue((event.target as HTMLInputElement).value)\n  }\n\n  return (\n    <form onSubmit={ onSubmit }>\n      <input type=\"text\" value={ value } onChange={ onChange } ref={ elem => elem && elem.focus() } />\n      <Button type=\"EDIT\" />\n    </form>\n  )\n}\n\nexport default ItemForm\n","import React, { useContext, useRef, useEffect } from \"react\"\nimport TreeyContext from \"../contexts/TreeyContext\"\nimport UIContext from \"../contexts/UIContext\"\nimport ItemDnD from \"./ItemDnD\"\nimport ItemForm from \"./ItemForm\"\nimport Items from \"./Items\"\nimport cs from \"classnames\"\nimport { isEqual } from \"lodash\"\nimport { getId, getData, stringifyData, parseData, createPathAdd } from \"../utils/treeItemUtils\"\n\nimport \"../styles/Item.sass\"\n\ntype Props = {\n  path: Path\n  parent: Id\n  index: Index\n  item: TreeItem\n}\n\nconst Item: React.FC<Props> = ({ path: parentPath, parent, index, item }) => {\n\n  const id = getId(item)!\n  const path = `${ parentPath }/${ index }/${ item.name }`\n  const pathAdd = createPathAdd(path)\n  const data = getData(item)\n  const dataString = stringifyData(data)\n  const hasRelations = item.relations.length > 0\n\n  const { treey } = useContext(TreeyContext)\n  const remove = async () => {\n    if (treey == null) return\n    if (id == null) return\n    await treey.remove(id, parent, index)\n  }\n  const {\n    isShownForm,\n    setShownForm,\n    unsetShownForm,\n    isOpen: itemIsOpen,\n    setOpen,\n    unsetOpen,\n    isDragging: itemIsDragging,\n    setActive,\n    clear\n  } = useContext(UIContext)\n\n  const isOpen = itemIsOpen(path)\n  const isEditing = isShownForm(path)\n  const isDragging = itemIsDragging(path)\n  const showItem = isDragging || !isEditing\n  const showForm = !isDragging && isEditing\n  const showItems = !isDragging && ((isOpen && hasRelations) || isShownForm(pathAdd))\n\n  const previousPath = useRef(path)\n  useEffect(() => {\n    const oldPath = previousPath.current\n    if (oldPath === path) return\n    clear(oldPath)\n    const wasOpen = itemIsOpen(oldPath)\n    if (wasOpen) setOpen(path)\n    return () => clear(path)\n  }, [path, clear, id, itemIsOpen, setOpen])\n\n  const onClick = () => {\n    setActive(path)\n    if (isShownForm(pathAdd)) unsetShownForm()\n    const selection = window.getSelection()\n    if (selection && selection.toString() !== \"\") return\n    if (!hasRelations) return\n    if (!isOpen) return setOpen(path)\n    if (isOpen) return unsetOpen(path)\n  }\n  const onDoubleClick = () => {\n    setOpen(path)\n    setShownForm(pathAdd)\n  }\n  const onClickAdd = () => {\n    setShownForm(pathAdd)\n    setOpen(path)\n    setActive(pathAdd)\n  }\n  const onClickEdit = () => {\n    setShownForm(path)\n    setActive(path)\n  }\n  const onClickDelete = async () => {\n    await remove()\n    unsetOpen(path)\n    setActive(parentPath)\n  }\n  const submit = async (value: string) => {\n    unsetShownForm()\n    const trimmedValue = value.trim()\n    if (trimmedValue === \"\") return remove()\n    const newData = parseData(trimmedValue)\n    if (isEqual(data, newData)) return\n    if (treey == null) return\n    if (id == null) return\n    await treey.update(id, newData)\n  }\n\n  return (\n    <div className=\"Item\" onClick={ event => event.stopPropagation() }>\n      <div className={ cs({ isHidden: !showItem }) }>\n        <ItemDnD\n          parent={ parent }\n          path={ path }\n          index={ index }\n          item={ item }\n          onClick={ onClick }\n          onDoubleClick={ onDoubleClick }\n          onClickAdd={ onClickAdd }\n          onClickEdit={ onClickEdit }\n          onClickDelete={ onClickDelete }\n        />\n      </div>\n      <div className={ cs(\"ItemFormWrap\", { isHidden: !showForm }) }>\n        <ItemForm submit={ submit } initialValue={ dataString } />\n      </div>\n      <div className={ cs({ isHidden: !showItems }) }>\n        <Items parent={ id } path={ path } items={ item.relations } />\n      </div>\n    </div>\n  )\n}\n\nexport default Item\n","import React, { useContext } from \"react\"\nimport TreeyContext from \"../contexts/TreeyContext\"\nimport UIContext from \"../contexts/UIContext\"\nimport ItemForm from \"./ItemForm\"\nimport Button from \"./Button\"\nimport { parseData, createPathAdd } from \"../utils/treeItemUtils\"\nimport cs from \"classnames\"\n\nimport \"../styles/FormAdd.sass\"\n\ntype Props = {\n  path: Path\n  parent: Id\n  isDisabled: boolean\n}\n\nconst FormAdd: React.FC<Props> = ({ path: parentPath, parent, isDisabled }) => {\n\n  const path = createPathAdd(parentPath)\n  const { isShownForm, setShownForm, unsetShownForm, isActive: itemIsActive, setActive, setOpen } = useContext(UIContext)\n  const { treey } = useContext(TreeyContext)\n\n  const showForm = isShownForm(path)\n  const show = isDisabled || !showForm\n  const isActive = itemIsActive(path)\n\n  const onClick = () => {\n    setShownForm(path)\n    setActive(path)\n  }\n\n  const submit = async (value: string) => {\n    unsetShownForm()\n    setOpen(parentPath)\n    const trimmedValue = value.trim()\n    if (trimmedValue === \"\") return\n    if (treey === null) return\n    const data = parseData(trimmedValue)\n    await treey.createAndAdd(data, parent)\n  }\n\n  return (\n    <div className={ cs(\"FormAdd\", { isDisabled, isActive }) } onClick={ event => event.stopPropagation() }>\n      { show &&\n        <Button onClick={ onClick } type=\"ADD\" />\n      }\n      { showForm &&\n        <ItemForm submit={ submit } />\n      }\n    </div>\n  )\n}\n\nexport default FormAdd\n","import React, { useContext } from \"react\"\nimport UIContext from \"../contexts/UIContext\"\nimport Item from \"./Item\"\nimport FormAdd from \"./FormAdd\"\n\nimport \"../styles/Items.sass\"\n\ntype Props = {\n  path: Path\n  parent: Id\n  items: TreeItems\n}\n\nconst Items: React.FC<Props> = ({ path, parent, items }) => {\n\n  const { isDragging } = useContext(UIContext)\n\n  const showItems = items.length > 0\n  const isDisabled = isDragging()\n\n  return (\n    <div className=\"Items\">\n      { showItems &&\n        <ul>\n          { items.map((item, index) => {\n              const key = `${ path }/${ index }/${ item.name }`\n              return (\n                <li key={ key }>\n                  <Item path={ path } parent={ parent } index={ index } item={ item } />\n                </li>\n              )\n            })\n          }\n        </ul>\n      }\n      <FormAdd path={ path } parent={ parent } isDisabled={ isDisabled } />\n    </div>\n  )\n}\n\nexport default Items\n","const last = <T>(arr: T[]) => arr[arr.length - 1]\nexport default last\n","import React, { useContext, useEffect } from \"react\"\nimport UIContext from \"../contexts/UIContext\"\nimport TreeyContext from \"../contexts/TreeyContext\"\nimport { parsePath } from \"../utils/treeItemUtils\"\nimport last from \"../utils/last\"\nimport { createPathAdd, isPathAdd, getItemFromPath } from \"../utils/treeItemUtils\"\n\nconst KeyboardEvents: React.FC = () => {\n\n  const {\n    isShownForm,\n    setShownForm,\n    unsetShownForm,\n    setOpen,\n    isOpen,\n    unsetOpen,\n    active,\n    setActive,\n    changeActive\n  } = useContext(UIContext)\n\n  const { tree, treey } = useContext(TreeyContext)\n\n  useEffect(() => {\n\n    const canOpen = (path: Path) => {\n      if (tree == null) return false\n      if (isPathAdd(path)) return false\n      const item = getItemFromPath(tree, path)\n      return item !== undefined && item.relations.length > 0\n    }\n\n    const handler = async (event: KeyboardEvent) => {\n      if (isShownForm() && event.keyCode !== 27) return\n      switch (event.keyCode) {\n        // down arrow\n        // k (VIM)\n        case 40:\n        case 75:\n          changeActive()\n          break\n        // up arrow\n        // i (VIM)\n        case 38:\n        case 73:\n          changeActive(\"prev\")\n          break\n        // right arrow\n        // l (VIM)\n        case 39:\n        case 76:\n          if (active === undefined) return\n          if (isOpen(active) || canOpen(active) === false) return changeActive()\n          setOpen(active)\n          break\n        // left arrow\n        // j (VIM)\n        case 37:\n        case 74:\n          if (active === undefined) return\n          if (isOpen(active) === false) return changeActive(\"prev\")\n          unsetOpen(active)\n          break\n        // enter\n        case 13:\n          event.preventDefault()\n          if (active === undefined) return\n          setShownForm(active)\n          break\n        // esc\n        case 27:\n          unsetShownForm()\n          break\n        // +\n        case 187:\n          if (event.shiftKey === false) return\n          if (active === undefined) return\n          event.preventDefault()\n          const pathAdd = isPathAdd(active) ? active : createPathAdd(active)\n          setShownForm(pathAdd)\n          setActive(pathAdd)\n          break\n        // backspace\n        case 8:\n          if (treey === null) return\n          if (active === undefined) return\n          const ids = parsePath(active)\n          const id = last(ids)\n          if (id === undefined) return\n          const parentId = last(ids.slice(0, -1))\n          if (parentId === undefined) return\n          changeActive(\"prev\")\n          unsetOpen(active)\n          await treey.remove(id, parentId)\n          break\n      }\n    }\n    window.addEventListener(\"keydown\", handler)\n    return () => window.removeEventListener(\"keydown\", handler)\n  }, [\n    isShownForm,\n    setShownForm,\n    unsetShownForm,\n    isOpen,\n    setOpen,\n    unsetOpen,\n    active,\n    setActive,\n    changeActive,\n    tree,\n    treey\n  ])\n\n  return null\n}\n\nexport default KeyboardEvents\n","import React, { useContext, useEffect } from \"react\"\nimport UIContext from \"../contexts/UIContext\"\n\nconst MouseEvents: React.FC = () => {\n\n  const {\n    unsetShownForm\n  } = useContext(UIContext)\n\n  useEffect(() => {\n    window.addEventListener(\"click\", unsetShownForm)\n    return () => window.removeEventListener(\"click\", unsetShownForm)\n  }, [unsetShownForm])\n\n  return null\n}\n\nexport default MouseEvents\n","import React, { useContext } from \"react\"\nimport Items from \"./Items\"\nimport { DndProvider } from \"react-dnd\"\nimport HTML5Backend from \"react-dnd-html5-backend\"\nimport UIContext from \"../contexts/UIContext\"\nimport KeyboardEvents from \"../components/KeyboardEvents\"\nimport MouseEvents from \"../components/MouseEvents\"\nimport { getId, createFullName } from \"../utils/treeItemUtils\"\n\nimport \"../styles/Tree.sass\"\n\ntype Props = {\n  tree: TreeItem\n  treey: Treey\n}\n\nconst Tree: React.FC<Props> = ({ tree, treey }) => {\n\n  // @TODO: Why can tree be undefined?\n  const hasTree = tree !== undefined\n  const items = hasTree ? tree.relations : undefined\n  const id = hasTree ? getId(tree)! : undefined\n  const parent = id\n  const path = hasTree ? createFullName(id!) : undefined\n\n  // set first item active\n  const { isActive, changeActive } = useContext(UIContext)\n  if (hasTree && isActive() === false) changeActive()\n\n  return (\n    <div className=\"Tree\">\n      { hasTree &&\n        <>\n          <KeyboardEvents />\n          <MouseEvents />\n          <DndProvider backend={ HTML5Backend }>\n            <Items path={ path! } parent={ parent! } items={ items! } />\n          </DndProvider>\n        </>\n      }\n    </div>\n  )\n}\n\nexport default Tree\n","import React, { useContext } from \"react\"\nimport { RouteComponentProps } from \"@reach/router\"\nimport TreeyContext from \"../contexts/TreeyContext\"\nimport Spinner from \"../components/Spinner\"\nimport Tree from \"../components/Tree\"\n\nimport \"../styles/Home.sass\"\n\ntype Props = RouteComponentProps\n\nconst PageHome: React.FC<Props> = () => {\n\n  const { tree, treey } = useContext(TreeyContext)\n  const showSpinner = tree == null\n  const showTree = tree != null && treey != null\n  const name = tree != null ? tree.name : \"\"\n\n  return (\n    <div className=\"Page PageHome\">\n      { showSpinner &&\n        <Spinner/>\n      }\n      { showTree &&\n        <>\n          <h1 className=\"RootItem\">{ name }</h1>\n          <Tree tree={ tree! } treey={ treey! } />\n        </>\n      }\n    </div>\n  )\n}\n\nexport default PageHome\n","import React, { useState, useContext, useEffect } from \"react\"\nimport TreeyContext from \"../contexts/TreeyContext\"\nimport treey from \"treey\"\n\nimport \"../styles/ItemOverview.sass\"\n\nconst { utils: { parseFullName } } = treey\n\ntype Props = {\n  fullName: string\n}\n\nconst ItemOverview: React.FC<Props> = ({ fullName }) => {\n\n  const [item, setItem] = useState<TreeItem>()\n  const [notFound, setNotFound] = useState(false)\n  const [invalidFullName, setInvalidFullName] = useState(false)\n  const { treey } = useContext(TreeyContext)\n\n  useEffect(() => {\n    if (treey == null) return\n    const id = parseFullName(fullName)\n    if (id == null) {\n      setInvalidFullName(true)\n      return\n    }\n    (async () => {\n      const item = await treey.read(id)\n      item !== undefined ? setItem(item) : setNotFound(true)\n    })()\n  }, [treey, fullName])\n\n  const isLoading = notFound === false && invalidFullName === false && item == null\n  const showItem = item != null\n  const itemName = item && item.name\n  const state = item && JSON.stringify(item.state, undefined, 2)\n\n  return (\n    <div className=\"ItemOverview\">\n      { isLoading &&\n        <p>is loading&hellip;</p>\n      }\n      { invalidFullName &&\n        <p>{ fullName } is not valid</p>\n      }\n      { notFound &&\n        <p>{ fullName } not found</p>\n      }\n      { showItem &&\n        <>\n          <h1>{ itemName }</h1>\n          <h2>state</h2>\n          <p className=\"small pre\">{ state }</p>\n          <h2>events</h2>\n          <ul>\n            { item && item.events.reverse().map((event: ItemEvent, index: number) => {\n                const payload = event.payload ? JSON.stringify(event.payload, undefined, 1) : null\n                const showPayload = payload != null\n                const datetime = String(event.datetime)\n                return (\n                  <li key={ index }>\n                    <strong>{ event.type }</strong><br/>\n                    { showPayload &&\n                      <><span className=\"small\">{ payload }</span><br/></>\n                    }\n                    { datetime }\n                  </li>\n                )\n              })\n            }\n          </ul>\n        </>\n      }\n    </div>\n  )\n}\n\nexport default ItemOverview\n","import React from \"react\"\nimport { RouteComponentProps } from \"@reach/router\"\nimport ItemOverview from \"../components/ItemOverview\"\n\ntype Props = RouteComponentProps & {\n  fullName?: string\n}\n\nconst PageItem: React.SFC<Props> = ({ fullName }) => {\n  return (\n    <div className=\"Page PageItem\">\n      <ItemOverview fullName={ fullName || \"\" } />\n    </div>\n  )\n}\n\nexport default PageItem\n","import React from \"react\"\nimport { RouteComponentProps } from \"@reach/router\"\n\nimport \"../styles/Page404.sass\"\n\ntype Props = RouteComponentProps\n\nconst Page404: React.SFC<Props> = () => {\n  return (\n    <div className=\"Page Page404\">\n      <p>404</p>\n    </div>\n  )\n}\n\nexport default Page404\n","import React from \"react\"\nimport TreeyProvider from \"./components/TreeyProvider\"\nimport UIProvider from \"./components/UIProvider\"\nimport { Router } from \"@reach/router\"\nimport basepath from \"./utils/basepath\"\nimport Header from \"./components/Header\"\nimport PageHome from \"./pages/Home\"\nimport PageItem from \"./pages/Item\"\nimport Page404 from \"./pages/404\"\n\n\nconst App: React.FC = () => {\n\n  return (\n    <div className=\"App\">\n      <Header/>\n      <main>\n        <TreeyProvider>\n          <UIProvider>\n            <Router basepath={ basepath }>\n              <PageHome path=\"/\" />\n              <PageItem path=\"/item/:fullName\" />\n              <Page404 default />\n            </Router>\n          </UIProvider>\n        </TreeyProvider>\n      </main>\n    </div>\n  )\n}\n\nexport default App\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\"\nimport ReactDOM from \"react-dom\"\nimport App from \"./App\"\nimport * as serviceWorker from \"./serviceWorker\"\n\nimport \"./styles/screen.sass\"\n\nReactDOM.render(<App />, document.getElementById(\"root\"))\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister()\n"],"sourceRoot":""}